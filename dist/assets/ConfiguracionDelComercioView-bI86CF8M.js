import{_ as v,Y as c,Z as m,$ as l,a8 as h,a1 as C,a2 as p,b as o,a6 as d,a7 as a,h as f,a4 as u,a0 as _,a5 as B,ao as y,aa as s,a9 as x,av as V,ag as I,ah as D,V as T}from"./index-BTSqrVub.js";import{V as U}from"./VAlert-B8fBpswR.js";const E={data(){return{comercio:{cuit:"",direccion:"",telefono:"",iibb:"",inicio_actividades:"",impresion:"",nombre:"",pto_venta:""},modosDeImpresion:[{value:"2",title:"A4"},{value:"1",title:"Ticket 80mm"}],url:"https://api-tpv.confinsoft.com/public",loading:!1,mensaje:!0}},methods:{getComercioData(){this.loading=!0,p.get(this.url+"/"+this.usuario.tpv+"/comercio",{headers:{Authorization:this.usuario.token}}).then(r=>{this.comercio=r.data}).catch(r=>{console.log(r)}).finally(()=>{this.loading=!1})},saveComercioData(){this.$swal({title:"¿Estás seguro?",text:"Estás a punto de guardar los datos del comercio",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, guardar",cancelButtonText:"Cancelar"}).then(r=>{if(r.isConfirmed){let e=new FormData;if(e.append("nombre",this.comercio.nombre),e.append("cuit",this.comercio.cuit),e.append("direccion",this.comercio.direccion),e.append("telefono",this.comercio.telefono),e.append("iibb",this.comercio.iibb),e.append("inicio_actividades",this.comercio.inicio_actividades),e.append("impresion",this.comercio.impresion),this.usuario.comercioTiene("facturacion")&&e.append("pto_venta",this.comercio.pto_venta),document.getElementById("logo").files.length>0&&e.append("logo",document.getElementById("logo").files[0]),this.usuario.comercioTiene("facturacion")&&document.getElementById("credenciales").files.length>0)for(let n=0;n<document.getElementById("credenciales").files.length;n++)e.append("credenciales[]",document.getElementById("credenciales").files[n]);this.loading=!0,p.post(this.url+"/"+this.usuario.tpv+"/comercio/actualizar",e,{headers:{Authorization:this.usuario.token}}).then(n=>{console.log(n),this.$swal("Guardado","Los datos del comercio han sido guardados","success"),this.getComercioData()}).catch(n=>{this.$swal("Error","Ha ocurrido un error al guardar los datos","error"),console.log(n)}).finally(()=>{this.loading=!1})}})}},mounted(){this.usuario.rol!=1&&this.$router.push("/no-autorizado"),this.getComercioData()},setup(){return{usuario:C()}}};function w(r,e,n,g,i,b){return m(),c(h,null,{default:l(()=>[o(d,null,{default:l(()=>[o(a,{class:"d-flex align-items-center"},{default:l(()=>[f("div",null,[o(U,{modelValue:i.mensaje,"onUpdate:modelValue":e[0]||(e[0]=t=>i.mensaje=t),border:"start","close-label":"Close Alert",color:"red-lighten-2",title:"Aviso",variant:"tonal",closable:""},{default:l(()=>[...e[10]||(e[10]=[u(" En esta sección se pueden configurar los datos del comercio y el tipo de impresión de los comprobantes.",-1),f("br",null,null,-1),u(" Estos datos son utilizados en la facturacion y deben ingresarse correctamente. ",-1)])]),_:1},8,["modelValue"])])]),_:1})]),_:1}),o(d,null,{default:l(()=>[o(a,null,{default:l(()=>[o(_,{title:"Datos del comercio",loading:i.loading},{default:l(()=>[o(B,null,{default:l(()=>[o(d,null,{default:l(()=>[o(a,{cols:"12",md:"6"},{default:l(()=>[o(s,{modelValue:i.comercio.nombre,"onUpdate:modelValue":e[1]||(e[1]=t=>i.comercio.nombre=t),label:"Nombre del comercio",variant:"outlined"},null,8,["modelValue"])]),_:1}),o(a,{cols:"12",md:"6"},{default:l(()=>[o(s,{modelValue:i.comercio.cuit,"onUpdate:modelValue":e[2]||(e[2]=t=>i.comercio.cuit=t),label:"CUIT",variant:"outlined"},null,8,["modelValue"])]),_:1}),o(a,{cols:"12",md:"6"},{default:l(()=>[o(s,{modelValue:i.comercio.direccion,"onUpdate:modelValue":e[3]||(e[3]=t=>i.comercio.direccion=t),label:"Dirección",variant:"outlined"},null,8,["modelValue"])]),_:1}),o(a,{cols:"12",md:"6"},{default:l(()=>[o(s,{modelValue:i.comercio.telefono,"onUpdate:modelValue":e[4]||(e[4]=t=>i.comercio.telefono=t),label:"Teléfono",variant:"outlined"},null,8,["modelValue"])]),_:1}),o(a,{cols:"12",md:"6"},{default:l(()=>[o(s,{modelValue:i.comercio.iibb,"onUpdate:modelValue":e[5]||(e[5]=t=>i.comercio.iibb=t),label:"Ingresos Brutos",variant:"outlined"},null,8,["modelValue"])]),_:1}),o(a,{cols:"12",md:"6"},{default:l(()=>[o(s,{modelValue:i.comercio.inicio_actividades,"onUpdate:modelValue":e[6]||(e[6]=t=>i.comercio.inicio_actividades=t),label:"Inicio de actividades",variant:"outlined",type:"date"},null,8,["modelValue"])]),_:1}),o(a,{cols:"12",md:"6"},{default:l(()=>[o(x,{modelValue:i.comercio.impresion,"onUpdate:modelValue":e[7]||(e[7]=t=>i.comercio.impresion=t),items:i.modosDeImpresion,label:"Modo de impresión",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),o(a,{cols:"12",md:"6"},{default:l(()=>[o(V,{label:"Logo",id:"logo",variant:"outlined"})]),_:1})]),_:1}),g.usuario.comercioTiene("facturacion")?(m(),c(d,{key:0},{default:l(()=>[o(a,{cols:"6"},{default:l(()=>[o(V,{label:"Credenciales AFIP",id:"credenciales",variant:"outlined",multiple:""})]),_:1}),o(a,{cols:"3"},{default:l(()=>[o(s,{modelValue:i.comercio.pto_venta,"onUpdate:modelValue":e[8]||(e[8]=t=>i.comercio.pto_venta=t),label:"Punto de venta",variant:"outlined",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})):y("",!0)]),_:1}),o(I,null,{default:l(()=>[o(D),o(T,{color:"primary",onClick:e[9]||(e[9]=t=>b.saveComercioData())},{default:l(()=>[...e[11]||(e[11]=[u("Guardar",-1)])]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})}const z=v(E,[["render",w]]);export{z as default};
