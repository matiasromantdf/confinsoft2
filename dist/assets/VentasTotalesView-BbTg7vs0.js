import{aa as p,ab as V,ac as m,ad as s,an as x,af as _,ag as c,h as t,ak as d,al as i,aI as b,ai as f,ae as v,am as y,l,aj as C,aq as h,z as k,aw as w,az as u,ax as g,F as S,ay as T}from"./index-DOjchTaU.js";const A={data(){return{url:"https://api-tpv.confinsoft.com/public",ventas:[],comisionistas:[],desde:"",hasta:"",comisionista:"",cargando:!1,mensaje:!0}},methods:{formatearMoneda(e){return!e||isNaN(e)?"0,00":parseFloat(e).toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})},getComisionistas(){c.get(this.url+"/"+this.usuario.tpv+"/comisionistas",{headers:{Authorization:this.usuario.token}}).then(e=>{this.comisionistas=e.data}).catch(e=>{console.log(e)})},getVentas(){this.cargando=!0,c.get(this.url+"/"+this.usuario.tpv+"/ventas/filtradas",{headers:{Authorization:this.usuario.token},params:{desde:this.desde,hasta:this.hasta,param:"periodo"}}).then(e=>{console.log(e.data),this.ventas=e.data}).catch(e=>{console.log(e)}).finally(()=>this.cargando=!1)}},mounted(){this.usuario.rol!=1&&this.$router.push("/no-autorizado"),this.getComisionistas();let e=new Date;this.desde=e.toISOString().substr(0,10),this.hasta=e.toISOString().substr(0,10)},setup(){return{usuario:_()}}},B={class:"font-weight-bold text-success"},F={class:"font-weight-bold text-primary"},N={class:"text-medium-emphasis"},j={class:"font-weight-medium"};function z(e,a,M,D,o,r){return m(),V(x,null,{default:s(()=>[t(d,null,{default:s(()=>[t(i,{class:"d-flex algin-items-center"},{default:s(()=>[t(b,{modelValue:o.mensaje,"onUpdate:modelValue":a[0]||(a[0]=n=>o.mensaje=n),border:"start","close-label":"Close Alert",color:"primary",title:"Aviso",variant:"tonal",closable:""},{default:s(()=>[...a[4]||(a[4]=[f(" Los montos con tarjeta de crédito NO incluyen los recargos por financiación, ya que en esta vista se muestran los ingresos de dinero. ",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(d,null,{default:s(()=>[t(i,null,{default:s(()=>[t(v,null,{default:s(()=>[t(y,null,{default:s(()=>[...a[5]||(a[5]=[l("h3",null,"Ventas totales",-1)])]),_:1}),t(C,null,{default:s(()=>[t(d,{class:"mt-1"},{default:s(()=>[t(i,{cols:"12",md:"4"},{default:s(()=>[t(h,{label:"desde",modelValue:o.desde,"onUpdate:modelValue":a[1]||(a[1]=n=>o.desde=n),type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(i,{cols:"12",md:"4"},{default:s(()=>[t(h,{label:"hasta",modelValue:o.hasta,"onUpdate:modelValue":a[2]||(a[2]=n=>o.hasta=n),type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(i,{cols:"12",md:"4",class:"text-center"},{default:s(()=>[t(k,{loading:o.cargando,color:"primary",onClick:a[3]||(a[3]=n=>r.getVentas())},{default:s(()=>[...a[6]||(a[6]=[f("Buscar",-1)])]),_:1},8,["loading"])]),_:1})]),_:1}),t(d,null,{default:s(()=>[t(i,null,{default:s(()=>[t(w,null,{default:s(()=>[a[7]||(a[7]=l("thead",null,[l("tr",null,[l("th",{class:"text-left"},"Total"),l("th",{class:"text-left"},"Ganancia"),l("th",{class:"text-left"},"Medios de pago")])],-1)),l("tbody",null,[l("tr",null,[l("td",B,"$"+u(r.formatearMoneda(o.ventas.total)),1),l("td",F,"$"+u(r.formatearMoneda(o.ventas.ganancia)),1),l("td",null,[(m(!0),g(S,null,T(o.ventas.medios,n=>(m(),g("tr",{key:n.medio},[l("td",N,u(n.medio)+" :",1),l("td",j,"$"+u(r.formatearMoneda(n.monto)),1)]))),128))])])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const I=p(A,[["render",z]]);export{I as default};
