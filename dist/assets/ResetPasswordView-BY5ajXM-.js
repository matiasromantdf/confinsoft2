import{aa as d,ax as u,ac as l,h as s,ad as r,an as m,ag as c,ak as p,al as f,ae as V,am as h,l as j,aj as g,ab as v,ao as y,aE as w,aF as b,aq as _,z as E,ai as o,aI as x,az as C}from"./index-CcD4rRL1.js";const M={data(){return{email:"",loading:!1,mensaje:"",tipoMensaje:"success",url:"https://api-tpv.confinsoft.com/public"}},methods:{required(e){return!!e||"El campo es requerido"},validEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||"El email no es válido"},async enviarResetPassword(){this.loading=!0,this.mensaje="";try{const e=new FormData;e.append("email",this.email),(await c.post(this.url+"/reset-password",e,{timeout:15e3})).status===200&&(this.mensaje="Se ha enviado un enlace de recuperación a su correo electrónico.",this.mensaje+=" Si no lo recibe, revise su carpeta de spam.",this.tipoMensaje="success",document.getElementById("email-field").disabled=!0)}catch(e){console.error("Error al enviar reset password:",e),e.response&&e.response.status===404?(this.mensaje="No se encontró una cuenta con ese correo electrónico.",this.tipoMensaje="warning"):e.response&&e.response.data&&e.response.data.message?(this.mensaje=e.response.data.message,this.tipoMensaje="error"):(this.mensaje="Error al enviar el correo de recuperación. Intente nuevamente.",this.tipoMensaje="error")}finally{this.loading=!1}}}};function k(e,t,B,q,a,n){return l(),u("div",null,[s(m,null,{default:r(()=>[s(p,{justify:"center"},{default:r(()=>[s(f,{md:"6",sm:"12"},{default:r(()=>[s(V,null,{default:r(()=>[s(h,null,{default:r(()=>[...t[1]||(t[1]=[j("h3",null,"Resetear Password",-1)])]),_:1}),s(g,null,{default:r(()=>[s(w,{onSubmit:b(n.enviarResetPassword,["prevent"])},{default:r(()=>[s(_,{modelValue:a.email,"onUpdate:modelValue":t[0]||(t[0]=i=>a.email=i),label:"Ingrese el mail con el cual se registró",type:"email",rules:[n.required,n.validEmail],readonly:a.loading,required:"",variant:"outlined",id:"email-field"},null,8,["modelValue","rules","readonly"]),s(E,{color:"primary",block:"",type:"submit",loading:a.loading,disabled:!a.email||a.loading},{default:r(()=>[...t[2]||(t[2]=[o(" Enviar ",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["onSubmit"]),a.mensaje?(l(),v(x,{key:0,type:a.tipoMensaje,class:"mt-4"},{default:r(()=>[o(C(a.mensaje),1)]),_:1},8,["type"])):y("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const R=d(M,[["render",k]]);export{R as default};
