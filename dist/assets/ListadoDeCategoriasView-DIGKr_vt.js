import{aa as p,aA as g,ax as C,ac as d,h as a,ad as t,an as f,af as h,ag as v,ak as V,al as b,ae as x,at as T,v as u,ai as n,aB as k,ab as E,ar as w,aC as y,aq as N,z as B,av as D,ap as A}from"./index-Dse_sjTz.js";const L={data(){return{search:"",headers:[{title:"Nombre",value:"nombre"},{title:"Comentarios",value:"comentarios"},{title:"Acciones",value:"actions",sortable:!1}],categorias:[],url:"https://api-tpv.confinsoft.com/public",cargando:!1,categoriaToEdit:{},dialogo:!1,textoItems:"Categorias por pÃ¡gina",cargandoText:"cargando categorias..."}},methods:{editarCategoria(o){console.log(o),this.categoriaToEdit=Object.assign({},o),console.log(this.categoriaToEdit),this.dialogo=!0},getCategorias(){this.cargando=!0,v.get(this.url+"/"+this.usuario.tpv+"/categorias",{headers:{Authorization:this.usuario.token}}).then(o=>{this.categorias=o.data}).catch(o=>{console.log(o)}).finally(()=>this.cargando=!1)},buscar(o){if(this.search.length>1){this.cargando=!0;let e=[];this.categorias.forEach(i=>{(i.nombre.toLowerCase().includes(this.search.toLowerCase())||i.comentarios!=null&&i.comentarios.toLowerCase().includes(this.search.toLowerCase()))&&e.push(i)}),this.categorias=e,this.cargando=!1}this.search.length==0&&this.getCategorias()},cerrarDialogo(){this.dialogo=!1,this.categoriaToEdit={}}},setup(){return{usuario:h()}},mounted(){this.getCategorias()},components:{NuevaCategoriaComponent:g}};function _(o,e,i,z,s,l){const c=g;return d(),C("div",null,[a(f,null,{default:t(()=>[a(V,null,{default:t(()=>[a(b,null,{default:t(()=>[a(x,null,{default:t(()=>[a(T,{headers:s.headers,items:s.categorias,"item-key":"id",class:"elevation-5 border",loading:s.cargando,hover:!0,"loading-text":s.cargandoText,"items-per-page-text":s.textoItems},{top:t(()=>[a(k,null,{default:t(()=>[a(y,null,{default:t(()=>[...e[5]||(e[5]=[n("Categorias",-1)])]),_:1}),a(N,{class:"mx-4",inset:"",vertical:""}),a(B,{onClick:e[0]||(e[0]=r=>s.dialogo=!0),"prepend-icon":"mdi-plus",class:"mr-4 border",tonal:"",color:"primary"},{default:t(()=>[...e[6]||(e[6]=[n("Nueva",-1)])]),_:1}),s.dialogo?(d(),E(c,{key:0,onActualizarCategorias:e[1]||(e[1]=r=>l.getCategorias()),toEdit:s.categoriaToEdit,onCerrarDialogo:e[2]||(e[2]=r=>l.cerrarDialogo())},null,8,["toEdit"])):w("",!0),a(D),a(A,{modelValue:s.search,"onUpdate:modelValue":e[3]||(e[3]=r=>s.search=r),"append-icon":"mdi-magnify",label:"Buscar",onKeyup:e[4]||(e[4]=r=>l.buscar(r)),"single-line":"","hide-details":"",variant:"underlined"},null,8,["modelValue"])]),_:1})]),"item.actions":t(({item:r})=>[a(u,{small:"",class:"mr-2",onClick:m=>l.editarCategoria(r),color:"blue"},{default:t(()=>[...e[7]||(e[7]=[n("mdi-pencil",-1)])]),_:1},8,["onClick"]),a(u,{small:"",onClick:m=>o.eliminarCategoria(r),color:"red"},{default:t(()=>[...e[8]||(e[8]=[n("mdi-delete",-1)])]),_:1},8,["onClick"])]),_:1},8,["headers","items","loading","loading-text","items-per-page-text"])]),_:1})]),_:1})]),_:1})]),_:1})])}const S=p(L,[["render",_]]);export{S as default};
