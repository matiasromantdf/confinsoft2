import{_ as h,W as p,X as C,al as u,ah as f,b as a,Z as t,a5 as v,a0 as c,a2 as V,a3 as b,$ as x,ac as _,am as T,an as k,a1 as n,a9 as E,V as w,Y as y,ao as N,af as D,a8 as B,ad as d}from"./index-B85ELo-E.js";const L={data(){return{search:"",headers:[{title:"Nombre",value:"nombre"},{title:"Comentarios",value:"comentarios"},{title:"Acciones",value:"actions",sortable:!1}],categorias:[],url:"https://api-tpv.confinsoft.com/api/public",cargando:!1,categoriaToEdit:{},dialogo:!1,textoItems:"Categorias por pÃ¡gina",cargandoText:"cargando categorias..."}},methods:{editarCategoria(o){console.log(o),this.categoriaToEdit=Object.assign({},o),console.log(this.categoriaToEdit),this.dialogo=!0},getCategorias(){this.cargando=!0,p.get(this.url+"/"+this.usuario.tpv+"/categorias",{headers:{Authorization:this.usuario.token}}).then(o=>{this.categorias=o.data}).catch(o=>{console.log(o)}).finally(()=>this.cargando=!1)},buscar(o){if(this.search.length>1){this.cargando=!0;let e=[];this.categorias.forEach(r=>{(r.nombre.toLowerCase().includes(this.search.toLowerCase())||r.comentarios!=null&&r.comentarios.toLowerCase().includes(this.search.toLowerCase()))&&e.push(r)}),this.categorias=e,this.cargando=!1}this.search.length==0&&this.getCategorias()},cerrarDialogo(){this.dialogo=!1,this.categoriaToEdit={}}},setup(){return{usuario:C()}},mounted(){this.getCategorias()},components:{NuevaCategoriaComponent:u}};function A(o,e,r,I,s,l){const g=u;return c(),f("div",null,[a(v,null,{default:t(()=>[a(V,null,{default:t(()=>[a(b,null,{default:t(()=>[a(x,null,{default:t(()=>[a(_,{headers:s.headers,items:s.categorias,"item-key":"id",class:"elevation-5 border",loading:s.cargando,hover:!0,"loading-text":s.cargandoText,"items-per-page-text":s.textoItems},{top:t(()=>[a(T,null,{default:t(()=>[a(k,null,{default:t(()=>[n("Categorias")]),_:1}),a(E,{class:"mx-4",inset:"",vertical:""}),a(w,{onClick:e[0]||(e[0]=i=>s.dialogo=!0),"prepend-icon":"mdi-plus",class:"mr-4 border",tonal:"",color:"primary"},{default:t(()=>[n("Nueva")]),_:1}),s.dialogo?(c(),y(g,{key:0,onActualizarCategorias:e[1]||(e[1]=i=>l.getCategorias()),toEdit:s.categoriaToEdit,onCerrarDialogo:e[2]||(e[2]=i=>l.cerrarDialogo())},null,8,["toEdit"])):N("",!0),a(D),a(B,{modelValue:s.search,"onUpdate:modelValue":e[3]||(e[3]=i=>s.search=i),"append-icon":"mdi-magnify",label:"Buscar",onKeyup:e[4]||(e[4]=i=>l.buscar(i)),"single-line":"","hide-details":"",variant:"underlined"},null,8,["modelValue"])]),_:1})]),"item.actions":t(({item:i})=>[a(d,{small:"",class:"mr-2",onClick:m=>l.editarCategoria(i),color:"blue"},{default:t(()=>[n("mdi-pencil")]),_:2},1032,["onClick"]),a(d,{small:"",onClick:m=>o.eliminarCategoria(i),color:"red"},{default:t(()=>[n("mdi-delete")]),_:2},1032,["onClick"])]),_:1},8,["headers","items","loading","loading-text","items-per-page-text"])]),_:1})]),_:1})]),_:1})]),_:1})])}const S=h(L,[["render",A]]);export{S as default};
