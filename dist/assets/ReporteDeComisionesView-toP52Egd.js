import{_ as p,Y as V,Z as d,$ as a,a8 as g,a1 as _,a2 as m,b as t,a6 as r,a7 as i,a0 as x,ad as v,h as e,a5 as C,aa as c,V as b,a4 as k,ai as y,al as u,aj as h,F as B,ak as S}from"./index-CE9qPGaY.js";const T={data(){return{url:"https://api-tpv.confinsoft.com/public",ventas:[],comisionistas:[],desde:"",hasta:"",comisionista:"",cargando:!1}},methods:{getComisionistas(){m.get(this.url+"/"+this.usuario.tpv+"/comisionistas",{headers:{Authorization:this.usuario.token}}).then(s=>{this.comisionistas=s.data}).catch(s=>{console.log(s)})},getVentas(){this.cargando=!0,m.get(this.url+"/"+this.usuario.tpv+"/ventas/filtradas",{headers:{Authorization:this.usuario.token},params:{desde:this.desde,hasta:this.hasta,param:"periodoYcomisiones"}}).then(s=>{console.log(s.data),this.ventas=s.data}).catch(s=>{console.log(s)}).finally(()=>this.cargando=!1)}},mounted(){this.usuario.rol!=1&&this.$router.push("/no-autorizado"),this.getComisionistas();let s=new Date;this.desde=s.toISOString().substr(0,10),this.hasta=s.toISOString().substr(0,10)},setup(){return{usuario:_()}}},w={class:"d-flex align-start flex-row"},z={class:"ml-4"};function D(s,l,F,N,o,f){return d(),V(g,null,{default:a(()=>[t(r,null,{default:a(()=>[t(i,null,{default:a(()=>[t(x,null,{default:a(()=>[t(v,null,{default:a(()=>[...l[3]||(l[3]=[e("h3",null,"Reporte de comisiones",-1)])]),_:1}),t(C,null,{default:a(()=>[t(r,{class:"mt-1"},{default:a(()=>[t(i,{cols:"12",md:"3"},{default:a(()=>[t(c,{label:"desde",modelValue:o.desde,"onUpdate:modelValue":l[0]||(l[0]=n=>o.desde=n),type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(i,{cols:"12",md:"3"},{default:a(()=>[t(c,{label:"hasta",modelValue:o.hasta,"onUpdate:modelValue":l[1]||(l[1]=n=>o.hasta=n),type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(i,{cols:"12",md:"2"}),t(i,{cols:"12",md:"2"}),t(i,{cols:"12",md:"2",class:"text-center"},{default:a(()=>[t(b,{loading:o.cargando,color:"primary",onClick:l[2]||(l[2]=n=>f.getVentas())},{default:a(()=>[...l[4]||(l[4]=[k("Buscar",-1)])]),_:1},8,["loading"])]),_:1})]),_:1}),t(r,null,{default:a(()=>[t(i,null,{default:a(()=>[t(y,null,{default:a(()=>[l[5]||(l[5]=e("thead",null,[e("tr",null,[e("th",{class:"text-left"},"Total"),e("th",{class:"text-left"},"Ganancia"),e("th",{class:"text-left"},"Comisiones")])],-1)),e("tbody",null,[e("tr",null,[e("td",null,u(o.ventas.total),1),e("td",null,u(o.ventas.ganancia),1),e("td",null,[(d(!0),h(B,null,S(o.ventas.comisionistas,n=>(d(),h("tr",w,[e("td",null,u(n.nombre)+" : ",1),e("td",z,"$"+u(n.comision),1)]))),256))])])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const U=p(T,[["render",D]]);export{U as default};
