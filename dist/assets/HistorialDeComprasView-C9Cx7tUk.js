import{_ as h,Y as _,Z as v,$ as l,a8 as C,a1 as x,a2 as b,b as a,a6 as i,a7 as r,a0 as f,ad as p,h as V,a5 as c,aa as g,V as u,a4 as d,ae as D,ax as k,ay as w,az as T,aA as y,m as B,af as I,ac as S,ag as A}from"./index-HZlGuzwl.js";const U={data(){return{cargando:!1,compras:[],cabeceras:[{title:"Fecha",value:"fecha"},{title:"Proveedor",key:"proveedor",value:t=>t.proveedor.nombre},{title:"Monto",value:"monto"},{title:"Acciones",value:"acciones",sortable:!1}],url:"https://api-tpv.confinsoft.com/public",dialogoDetalle:!1,itemsDelDetalle:[],desde:"",hasta:""}},methods:{getCompras(){this.cargando=!0;let t=this.url+"/"+this.usuario.tpv+"/compras/filtradas";b.get(t,{params:{desde:this.desde,hasta:this.hasta,param:"historial"},headers:{Authorization:this.usuario.token}}).then(e=>{this.compras=e.data,this.cargando=!1}).catch(e=>{console.error(e),this.cargando=!1})},mostrarDetalle(t){this.itemsDelDetalle=t.detalles,this.itemsDelDetalle.forEach(e=>{delete e.updated_at,delete e.created_at,delete e.compra_id,delete e.articulo_id,delete e.tpv,delete e.id,e.item=e.articulo.descripcion,delete e.articulo}),this.dialogoDetalle=!0},eliminar(t){console.log("eliminar",t)},reimprimir(t){console.log("reimprimir",t)}},mounted(){this.usuario.rol!=1&&this.$router.push({name:"no-autorizado"}),this.desde=new Date().toISOString().substr(0,10),this.hasta=new Date().toISOString().substr(0,10)},setup(){return{usuario:x()}}};function z(t,e,F,L,s,n){return v(),_(C,null,{default:l(()=>[a(i,null,{default:l(()=>[a(r,null,{default:l(()=>[a(f,null,{default:l(()=>[a(p,null,{default:l(()=>[...e[5]||(e[5]=[V("h3",null,"Historial de Compras",-1)])]),_:1}),a(c,null,{default:l(()=>[a(i,{class:"mt-1"},{default:l(()=>[a(r,{cols:"12",md:"4"},{default:l(()=>[a(g,{label:"desde",modelValue:s.desde,"onUpdate:modelValue":e[0]||(e[0]=o=>s.desde=o),type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"4"},{default:l(()=>[a(g,{label:"hasta",modelValue:s.hasta,"onUpdate:modelValue":e[1]||(e[1]=o=>s.hasta=o),type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"4",class:"text-center"},{default:l(()=>[a(u,{loading:s.cargando,color:"primary",onClick:e[2]||(e[2]=o=>n.getCompras())},{default:l(()=>[...e[6]||(e[6]=[d("Buscar",-1)])]),_:1},8,["loading"])]),_:1})]),_:1}),a(i,null,{default:l(()=>[a(r,null,{default:l(()=>[a(D,{items:s.compras,headers:s.cabeceras,"no-data-text":"sin datos","items-per-page-text":"filas"},{"item.acciones":l(({item:o})=>[a(k,null,{activator:l(({props:m})=>[a(u,B({variant:"flat"},m),{default:l(()=>[a(I,null,{default:l(()=>[...e[7]||(e[7]=[d("mdi-dots-vertical",-1)])]),_:1})]),_:1},16)]),default:l(()=>[a(w,null,{default:l(()=>[a(T,{onClick:m=>n.mostrarDetalle(o)},{default:l(()=>[a(y,null,{default:l(()=>[...e[8]||(e[8]=[d("Ver detalle",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["items","headers"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(S,{modelValue:s.dialogoDetalle,"onUpdate:modelValue":e[4]||(e[4]=o=>s.dialogoDetalle=o),"max-width":"90%"},{default:l(()=>[a(f,null,{default:l(()=>[a(p,null,{default:l(()=>[...e[9]||(e[9]=[V("h3",null,"Detalle de la compra",-1)])]),_:1}),a(c,null,{default:l(()=>[a(i,null,{default:l(()=>[a(r,null,{default:l(()=>[a(D,{items:s.itemsDelDetalle,"items-per-page-text":"Filas"},null,8,["items"])]),_:1})]),_:1})]),_:1}),a(A,null,{default:l(()=>[a(u,{onClick:e[3]||(e[3]=o=>s.dialogoDetalle=!1)},{default:l(()=>[...e[10]||(e[10]=[d("Cerrar",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const H=h(U,[["render",z]]);export{H as default};
