import{_ as z,aj as k,Z as f,b as e,$ as a,a8 as w,a1 as B,a2 as g,Y as h,ao as x,a6 as n,a7 as d,a0 as p,a5 as V,a4 as r,F as A,ak as T,al as c,ag as b,ac as C,ad as _,aa as i,at as S,ah as E,V as m,m as y,au as P,af as N}from"./index-BJyR9_Yq.js";const j={data(){return{url:"https://api-tpv.confinsoft.com/public",usuarios:[],cargando:!1,mensaje:!0,dialog:!1,dialogEditar:!1,nuevoUsuario:{nombre:"",username:"",password:""},guardandoNuevo:!1}},methods:{getUsuarios(){this.cargando=!0,g.get(this.url+"/"+this.usuario.tpv+"/usuarios/vendedores",{headers:{Authorization:this.usuario.token}}).then(t=>{this.usuarios=t.data,this.nuevoUsuario.username=this.usuario.tpv+"-caja-"+(this.usuarios.length+1)}).catch(t=>{console.log(t)}).finally(()=>this.cargando=!1)},guardarNuevoUsuario(){this.guardandoNuevo=!0,g.post(this.url+"/"+this.usuario.tpv+"/usuarios/vendedores",this.nuevoUsuario,{headers:{Authorization:this.usuario.token}}).then(t=>{this.dialog=!1,this.$swal("Usuario creado","El usuario ha sido creado","success"),this.getUsuarios()}).catch(t=>{console.log(t)}).finally(()=>this.guardandoNuevo=!1)},editarUsuario(t){g.put(this.url+"/"+this.usuario.tpv+"/usuarios/vendedores/"+t.id,t,{headers:{Authorization:this.usuario.token}}).then(l=>{this.dialogEditar=!1,this.getUsuarios()}).catch(l=>{console.log(l)})},eliminarUsuario(t){this.$swal({title:"Eliminar usuario",text:"¿Está seguro que desea eliminar este usuario?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(l=>{l.isConfirmed&&g.delete(this.url+"/"+this.usuario.tpv+"/usuarios/vendedores/"+t.id,{headers:{Authorization:this.usuario.token}}).then(v=>{this.$swal("Usuario eliminado","El usuario ha sido eliminado","success"),this.getUsuarios()}).catch(v=>{console.log(v)})})}},created(){this.usuario.rol!=1&&this.$router.push({name:"no-autorizado"}),this.getUsuarios()},setup(){return{usuario:B()}}};function F(t,l,v,D,s,U){return f(),k("div",null,[e(w,null,{default:a(()=>[e(n,null,{default:a(()=>[e(d,null,{default:a(()=>[e(p,{title:"Usuarios vendedores",loading:s.cargando},{default:a(()=>[e(V,null,{default:a(()=>[...l[8]||(l[8]=[r(" En esta sección se pueden crear, editar y eliminar usuarios vendedores. Estos usuarios van a tener restricciones de acceso a funciones sensibles de la aplicación, como la gestión de productos. Sólo podrán realizar ventas y ver ciertos reportes. ",-1)])]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}),s.cargando?x("",!0):(f(),h(n,{key:0,class:"d-flex"},{default:a(()=>[e(d,{class:"d-flex"},{default:a(()=>[(f(!0),k(A,null,T(s.usuarios,o=>(f(),h(p,{class:"ml-2",key:o.id,width:"200px",elevation:"15"},{prepend:a(()=>[e(P,{color:"blue-darken-2"},{default:a(()=>[e(N,{icon:"mdi-account"})]),_:1})]),append:a(()=>[r(c(o.nombre),1)]),default:a(()=>[e(V,null,{default:a(()=>[r(" username: "+c(o.username)+" "+c(o.email),1)]),_:2},1024),e(b,null,{default:a(()=>[e(C,{modelValue:s.dialogEditar,"onUpdate:modelValue":l[1]||(l[1]=u=>s.dialogEditar=u),"max-width":"290"},{activator:a(({props:u})=>[e(m,y({color:"blue darken-1"},{ref_for:!0},u),{default:a(()=>[...l[9]||(l[9]=[r("Editar",-1)])]),_:1},16)]),default:a(()=>[e(p,null,{default:a(()=>[e(_,{class:"headline"},{default:a(()=>[...l[10]||(l[10]=[r("Editar usuario",-1)])]),_:1}),e(V,null,{default:a(()=>[e(n,null,{default:a(()=>[e(d,null,{default:a(()=>[e(i,{label:"Nombre",variant:"outlined","hide-details":"",modelValue:o.nombre,"onUpdate:modelValue":u=>o.nombre=u},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(n,null,{default:a(()=>[e(d,null,{default:a(()=>[e(i,{label:"Username",variant:"outlined","hide-details":"",modelValue:o.username,"onUpdate:modelValue":u=>o.username=u},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(n,null,{default:a(()=>[e(d,null,{default:a(()=>[e(S,{label:"Cambiar contraseña",modelValue:o.cambiarPassword,"onUpdate:modelValue":u=>o.cambiarPassword=u,"hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(n,null,{default:a(()=>[e(d,null,{default:a(()=>[e(i,{label:"password",variant:"outlined",type:"password",hint:"",modelValue:o.password,"onUpdate:modelValue":u=>o.password=u,disabled:!o.cambiarPassword},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1024)]),_:2},1024)]),_:2},1024),e(b,null,{default:a(()=>[e(E),e(m,{color:"blue darken-1",text:"",onClick:l[0]||(l[0]=u=>s.dialogEditar=!1)},{default:a(()=>[...l[11]||(l[11]=[r("Cerrar",-1)])]),_:1}),e(m,{color:"green darken-1",text:"",onClick:u=>U.editarUsuario(o)},{default:a(()=>[...l[12]||(l[12]=[r("Guardar",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"]),e(m,{color:"red",onClick:u=>U.eliminarUsuario(o)},{default:a(()=>[...l[13]||(l[13]=[r("Eliminar",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),s.usuarios.length<2?(f(),h(p,{key:0,class:"ml-2",width:"200px",elevation:"15"},{default:a(()=>[e(V,null,{default:a(()=>[e(w,null,{default:a(()=>[e(n,null,{default:a(()=>[e(d,null,{default:a(()=>[e(C,{modelValue:s.dialog,"onUpdate:modelValue":l[7]||(l[7]=o=>s.dialog=o),"max-width":"290"},{activator:a(({props:o})=>[e(N,y({color:"primary"},o,{size:"100"}),{default:a(()=>[...l[14]||(l[14]=[r("mdi-account-plus",-1)])]),_:1},16)]),default:a(()=>[e(p,null,{default:a(()=>[e(_,{class:"headline"},{default:a(()=>[...l[15]||(l[15]=[r("Nuevo usuario",-1)])]),_:1}),e(V,null,{default:a(()=>[e(n,null,{default:a(()=>[e(d,null,{default:a(()=>[e(i,{label:"Nombre",variant:"outlined","hide-details":"",modelValue:s.nuevoUsuario.nombre,"onUpdate:modelValue":l[2]||(l[2]=o=>s.nuevoUsuario.nombre=o)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,null,{default:a(()=>[e(d,null,{default:a(()=>[e(i,{label:"Username",variant:"outlined","hide-details":"",modelValue:s.nuevoUsuario.username,"onUpdate:modelValue":l[3]||(l[3]=o=>s.nuevoUsuario.username=o),readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n),e(n,null,{default:a(()=>[e(d,null,{default:a(()=>[e(i,{label:"password",variant:"outlined",type:"password",hint:"ingrese con atención la contraseña",modelValue:s.nuevoUsuario.password,"onUpdate:modelValue":l[4]||(l[4]=o=>s.nuevoUsuario.password=o)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(b,null,{default:a(()=>[e(E),e(m,{color:"blue darken-1",text:"",onClick:l[5]||(l[5]=o=>s.dialog=!1)},{default:a(()=>[...l[16]||(l[16]=[r("Cerrar",-1)])]),_:1}),e(m,{color:"green darken-1",text:"",onClick:l[6]||(l[6]=o=>U.guardarNuevoUsuario()),loading:s.guardandoNuevo},{default:a(()=>[...l[17]||(l[17]=[r("Guardar",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):x("",!0)]),_:1})]),_:1}))]),_:1})])}const q=z(j,[["render",F]]);export{q as default};
