import{_ as b,W as V,ap as k,X as g,a0 as f,ah as v,b as e,Z as i,$ as C,aq as T,ar as U,a4 as N,a5 as h,a2 as n,a3 as u,a8 as d,ae as y,af as _,V as c,a1 as m,aa as z,Y as w,ao as B,ac as S,am as j,an as I,a9 as O,ad as E}from"./index-B85ELo-E.js";const F={data(){return{comisionista:{nombre:"",apellido:"",telefono:"",id:""},url:"https://api-tpv.confinsoft.com/api/public",cargando:!1,dialogo:!0,nombreRule:[t=>t?t.length<3?"El nombre debe tener al menos 3 caracteres":!0:"El nombre es requerido"],apellidoRule:[t=>t?t.length<3?"El apellido debe tener al menos 3 caracteres":!0:"El apellido es requerido"],valid:!1}},methods:{guardar(){if(this.valid)V.put(this.url+"/"+this.usuario.tpv+"/comisionistas",this.comisionista,{headers:{Authorization:this.usuario.token}}).then(t=>{t.data.id&&(k.fire({title:"Datos del barbero editados correctamente",icon:"success"}),this.$emit("cerrar"),this.$emit("actualizar"))}).catch(t=>{console.log(t)});else return},cerrarDialogo(){this.$emit("cerrar")}},setup(){return{usuario:g()}},mounted(){this.edit&&(this.comisionista=this.edit)},emits:["actualizar","cerrar"],props:{edit:{type:Object},user:{type:Object}}};function G(t,o,x,p,l,r){return f(),v("div",null,[e(z,{width:"500",class:"rounded-xl",modelValue:l.dialogo,"onUpdate:modelValue":o[6]||(o[6]=a=>l.dialogo=a)},{default:i(()=>[e(C,{title:"Editar datos"},{default:i(()=>[e(T,{modelValue:l.valid,"onUpdate:modelValue":o[4]||(o[4]=a=>l.valid=a),onSubmit:o[5]||(o[5]=U(a=>r.guardar(),["prevent"]))},{default:i(()=>[e(N,null,{default:i(()=>[e(h,null,{default:i(()=>[e(n,null,{default:i(()=>[e(u,{cols:"9"},{default:i(()=>[e(d,{modelValue:l.comisionista.nombre,"onUpdate:modelValue":o[0]||(o[0]=a=>l.comisionista.nombre=a),label:"Nombre",variant:"outlined",required:"",rules:l.nombreRule},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(n,null,{default:i(()=>[e(u,{cols:"9"},{default:i(()=>[e(d,{modelValue:l.comisionista.apellido,"onUpdate:modelValue":o[1]||(o[1]=a=>l.comisionista.apellido=a),label:"Nombre",variant:"outlined",required:"",rules:l.apellidoRule},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(n,null,{default:i(()=>[e(u,{cols:"4"},{default:i(()=>[e(d,{modelValue:l.comisionista.telefono,"onUpdate:modelValue":o[2]||(o[2]=a=>l.comisionista.telefono=a),label:"Telefono",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(y,null,{default:i(()=>[e(_),e(c,{text:"Cerrar",onClick:o[3]||(o[3]=a=>r.cerrarDialogo())}),e(c,{color:"success",type:"submit"},{default:i(()=>[m("Guardar")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])])}const D=b(F,[["render",G]]),K={data(){return{comisionista:{nombre:"",apellido:"",telefono:""},url:"https://api-tpv.confinsoft.com/api/public",cargando:!1,dialogo:!1,nombreRule:[t=>t?t.length<3?"El nombre debe tener al menos 3 caracteres":!0:"El nombre es requerido"],apellidoRule:[t=>t?t.length<3?"El apellido debe tener al menos 3 caracteres":!0:"El apellido es requerido"],valid:!1}},methods:{guardar(){if(this.valid)V.post(this.url+"/"+this.usuario.tpv+"/comisionistas",this.comisionista,{headers:{Authorization:this.usuario.token}}).then(t=>{t.data.id&&(k.fire({title:"Datos del barbero guardados correctamente",icon:"success"}),this.$emit("actualizar"),this.dialogo=!1)}).catch(t=>{console.log(t)});else return},cerrarDialogo(){this.dialogo=!1}},setup(){return{usuario:g()}},mounted(){},emits:["actualizar"]};function L(t,o,x,p,l,r){return f(),v("div",null,[e(c,{onClick:o[0]||(o[0]=a=>l.dialogo=!0),"prepend-icon":"mdi-plus",class:"mr-4 border",tonal:"",color:"primary"},{default:i(()=>[m("Nuevo")]),_:1}),e(z,{width:"500",class:"rounded-xl",modelValue:l.dialogo,"onUpdate:modelValue":o[7]||(o[7]=a=>l.dialogo=a)},{default:i(()=>[e(C,{title:"Nuevo Barbero"},{default:i(()=>[e(T,{modelValue:l.valid,"onUpdate:modelValue":o[5]||(o[5]=a=>l.valid=a),onSubmit:o[6]||(o[6]=U(a=>r.guardar(),["prevent"]))},{default:i(()=>[e(N,null,{default:i(()=>[e(h,null,{default:i(()=>[e(n,null,{default:i(()=>[e(u,{cols:"9"},{default:i(()=>[e(d,{modelValue:l.comisionista.nombre,"onUpdate:modelValue":o[1]||(o[1]=a=>l.comisionista.nombre=a),label:"Nombre",variant:"outlined",required:"",rules:l.nombreRule},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(n,null,{default:i(()=>[e(u,{cols:"9"},{default:i(()=>[e(d,{modelValue:l.comisionista.apellido,"onUpdate:modelValue":o[2]||(o[2]=a=>l.comisionista.apellido=a),label:"Apellido",variant:"outlined",required:"",rules:l.apellidoRule},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(n,null,{default:i(()=>[e(u,{cols:"4"},{default:i(()=>[e(d,{modelValue:l.comisionista.telefono,"onUpdate:modelValue":o[3]||(o[3]=a=>l.comisionista.telefono=a),label:"Telefono",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(y,null,{default:i(()=>[e(_),e(c,{text:"Cerrar",onClick:o[4]||(o[4]=a=>r.cerrarDialogo())}),e(c,{color:"success",type:"submit"},{default:i(()=>[m("Guardar")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])])}const q=b(K,[["render",L]]),M={data(){return{search:"",headers:[{title:"Nombre",value:"nombre"},{title:"Apellido",value:"apellido"},{title:"Teléfono",value:"telefono"},{title:"Acciones",value:"actions",sortable:!1}],comisionistas:[],url:"https://api-tpv.confinsoft.com/api/public",cargando:!1,comisionistaToEdit:{},modalEditar:!1,textoItems:"Clientes por página",cargandoText:"cargando clientes..."}},methods:{editar(t){this.comisionistaToEdit=Object.assign({},t),this.modalEditar=!0},getComisionistas(){this.cargando=!0,V.get(this.url+"/"+this.usuario.tpv+"/comisionistas",{headers:{Authorization:this.usuario.token}}).then(t=>{this.comisionistas=t.data}).catch(t=>{console.log(t)}).finally(()=>this.cargando=!1)},eliminarCliente(t){alert("eliminar cliente"+t.nombre)},buscar(){console.log("buscando")}},setup(){return{usuario:g()}},mounted(){this.usuario.rol!=1&&this.$router.push("/no-autorizado"),this.getComisionistas()},components:{NuevoComisionistaComponent:q,EditarComisionistaComponent:D}};function W(t,o,x,p,l,r){const a=q,A=D;return f(),v("div",null,[e(h,null,{default:i(()=>[e(n,null,{default:i(()=>[e(u,null,{default:i(()=>[e(C,null,{default:i(()=>[e(S,{headers:l.headers,items:l.comisionistas,"item-key":"id",class:"elevation-5 border",loading:l.cargando,hover:!0,"loading-text":l.cargandoText,"items-per-page-text":l.textoItems},{top:i(()=>[e(j,null,{default:i(()=>[e(I,null,{default:i(()=>[m("Barberos")]),_:1}),e(O,{class:"mx-4",inset:"",vertical:""}),e(a,{onActualizar:o[0]||(o[0]=s=>r.getComisionistas())}),e(_),e(d,{modelValue:l.search,"onUpdate:modelValue":o[1]||(o[1]=s=>l.search=s),"append-icon":"mdi-magnify",label:"Buscar",onKeyup:o[2]||(o[2]=s=>r.buscar()),"single-line":"","hide-details":"",variant:"underlined"},null,8,["modelValue"])]),_:1})]),"item.actions":i(({item:s})=>[e(E,{small:"",class:"mr-2",onClick:R=>r.editar(s),color:"blue"},{default:i(()=>[m("mdi-pencil")]),_:2},1032,["onClick"]),e(E,{small:"",onClick:R=>t.eliminar(s),color:"red"},{default:i(()=>[m("mdi-delete")]),_:2},1032,["onClick"])]),_:1},8,["headers","items","loading","loading-text","items-per-page-text"])]),_:1})]),_:1})]),_:1})]),_:1}),l.modalEditar?(f(),w(A,{key:0,edit:l.comisionistaToEdit,user:p.usuario,onActualizar:o[3]||(o[3]=s=>r.getComisionistas()),onCerrar:o[4]||(o[4]=s=>l.modalEditar=!1)},null,8,["edit","user"])):B("",!0)])}const Y=b(M,[["render",W]]);export{Y as default};
