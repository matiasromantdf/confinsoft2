import{_ as y,aj as c,Z as i,b as t,$ as e,a8 as g,a2 as C,a1 as h,Y as x,ao as V,a6 as d,a7 as u,a0 as v,ad as z,h as l,a5 as S,av as M,a4 as o,al as b,af as n,ay as A,az as p,aA as f,aD as D,ag as T,V as N,F as k}from"./index-HEDWlsOl.js";const w=new MercadoPago("APP_USR-542986ce-8be5-49a9-8fb9-99ac00e3be2f");w.bricks();const R={data(){return{url:"https://api-tpv.confinsoft.com/public",cargando:!1,cargandoPago:!1,cargandoText:"cargando suscripción...",suscripcion:{},walletCreated:!1}},setup(){return{usuario:h()}},mounted(){},methods:{test(){this.cargandoPago=!0;let s={tpv:this.usuario.tpv};C.post(this.url+"/"+this.usuario.tpv+"/comercio/pagarSuscripcion",s,{headers:{Authorization:this.usuario.token}}).then(a=>{console.log(a.data),w.bricks().create("wallet","wallet_container",{initialization:{preferenceId:a.data},customization:{texts:{valueProp:"smart_option"}}}).then(()=>{this.walletCreated=!0,this.cargandoPago=!1}).catch(_=>{console.error("Error creando wallet:",_),this.cargandoPago=!1,this.$swal("Error","Hubo un problema al cargar la pasarela de pago. Por favor, intenta nuevamente.","error")})}).catch(a=>{console.log(a),this.cargandoPago=!1})},adherirseDA(){window.location.href="https://www.mercadopago.com.ar/subscriptions/checkout?preapproval_plan_id=2c93808490c3cfa40190ccdf376202c5"},formatearfecha(s){return new Date(s).toLocaleDateString()},formatearMoneda(s){return parseFloat(s).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}},computed:{proximoVencimiento(){let s=new Date(this.usuario.comercio.vencimiento);return s.setMonth(s.getMonth()+1),s.toLocaleDateString()}}},B={class:"mb-2"},E={class:"mb-0"},F={class:"d-flex align-center mb-3"},L={key:0,class:"text-caption text-medium-emphasis"},j={key:1,class:"text-caption text-medium-emphasis"},I={class:"d-flex align-center"};function U(s,a,_,P,r,m){return i(),c("div",null,[t(g,null,{default:e(()=>[t(d,null,{default:e(()=>[t(u,null,{default:e(()=>[t(v,{elevation:"10",loading:r.cargando},{default:e(()=>[t(z,null,{default:e(()=>[...a[0]||(a[0]=[l("h2",null,"Suscripción",-1)])]),_:1}),t(S,null,{default:e(()=>[t(g,null,{default:e(()=>[t(d,{class:"mb-4"},{default:e(()=>[t(u,null,{default:e(()=>[t(M,{type:"info",variant:"tonal",class:"mb-4",icon:"mdi-information-outline"},{default:e(()=>[a[3]||(a[3]=l("div",{class:"text-h6 mb-2"},"Estado de tu Suscripción",-1)),l("p",B,[a[1]||(a[1]=l("strong",null,"Vencimiento actual:",-1)),o(" "+b(m.formatearfecha(P.usuario.comercio.vencimiento)),1)]),l("p",E,[a[2]||(a[2]=l("strong",null,"Costo de renovación:",-1)),o(" ARS$"+b(m.formatearMoneda(P.usuario.comercio.precio)),1)])]),_:1})]),_:1})]),_:1}),t(d,{class:"mb-4"},{default:e(()=>[t(u,null,{default:e(()=>[t(v,{variant:"outlined",class:"pa-4"},{default:e(()=>[l("div",F,[t(n,{color:"primary",class:"mr-2"},{default:e(()=>[...a[4]||(a[4]=[o("mdi-shield-check",-1)])]),_:1}),a[5]||(a[5]=l("h6",{class:"text-h6"},"Procesamiento Seguro",-1))]),t(A,{density:"compact",class:"bg-transparent"},{default:e(()=>[t(p,null,{prepend:e(()=>[t(n,{color:"success",size:"small"},{default:e(()=>[...a[6]||(a[6]=[o("mdi-check-circle",-1)])]),_:1})]),default:e(()=>[t(f,null,{default:e(()=>[...a[7]||(a[7]=[o("El pago se procesa automáticamente a través de ",-1),l("strong",null,"MercadoPago",-1)])]),_:1})]),_:1}),t(p,null,{prepend:e(()=>[t(n,{color:"success",size:"small"},{default:e(()=>[...a[8]||(a[8]=[o("mdi-check-circle",-1)])]),_:1})]),default:e(()=>[t(f,null,{default:e(()=>[...a[9]||(a[9]=[o("Tu suscripción se renueva inmediatamente después del pago",-1)])]),_:1})]),_:1}),t(p,null,{prepend:e(()=>[t(n,{color:"success",size:"small"},{default:e(()=>[...a[10]||(a[10]=[o("mdi-check-circle",-1)])]),_:1})]),default:e(()=>[t(f,null,{default:e(()=>[...a[11]||(a[11]=[o("Recibirás confirmación por email una vez completado el proceso",-1)])]),_:1})]),_:1}),t(p,null,{prepend:e(()=>[t(n,{color:"success",size:"small"},{default:e(()=>[...a[12]||(a[12]=[o("mdi-check-circle",-1)])]),_:1})]),default:e(()=>[t(f,null,{default:e(()=>[...a[13]||(a[13]=[o("Métodos de pago: Tarjeta de crédito/débito, transferencia, efectivo (RapiPago/PagoFácil)",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(d,null,{default:e(()=>[t(u,{class:"text-center"},{default:e(()=>[t(D,{color:"primary",variant:"outlined","prepend-icon":"mdi-shield-lock",size:"small"},{default:e(()=>[...a[14]||(a[14]=[o(" Pagos seguros con MercadoPago ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(T,{class:"pa-4"},{default:e(()=>[t(g,null,{default:e(()=>[t(d,{justify:"center"},{default:e(()=>[t(u,{cols:"12",md:"8",class:"text-center"},{default:e(()=>[t(N,{color:"primary",size:"large",variant:"elevated",loading:r.cargandoPago,disabled:r.cargandoPago,onClick:m.test,"prepend-icon":"mdi-credit-card",class:"mb-3"},{default:e(()=>[r.cargandoPago?(i(),c(k,{key:0},[o(" Preparando pago... ")],64)):(i(),c(k,{key:1},[o(" Renovar suscripción hasta el "+b(m.proximoVencimiento),1)],64))]),_:1},8,["loading","disabled","onClick"]),r.cargandoPago?(i(),c("div",L,[t(n,{size:"small",class:"mr-1"},{default:e(()=>[...a[15]||(a[15]=[o("mdi-loading mdi-spin",-1)])]),_:1}),a[16]||(a[16]=o(" Conectando con MercadoPago, por favor espera... ",-1))])):(i(),c("div",j," Al hacer clic se abrirá la pasarela de pago de MercadoPago "))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}),r.cargandoPago?V("",!0):(i(),x(d,{key:0,justify:"center"},{default:e(()=>[t(u,{md:"8",sm:"12"},{default:e(()=>[a[19]||(a[19]=l("div",{id:"wallet_container"},null,-1)),r.walletCreated?(i(),x(v,{key:0,variant:"outlined",class:"mt-4 pa-3",color:"success"},{default:e(()=>[l("div",I,[t(n,{color:"success",class:"mr-2"},{default:e(()=>[...a[17]||(a[17]=[o("mdi-information",-1)])]),_:1}),a[18]||(a[18]=l("div",null,[l("div",{class:"text-body-2 font-weight-medium"},"Pasarela de pago lista"),l("div",{class:"text-caption"},"Una vez completado el pago, tu suscripción se renovará automáticamente. ")],-1))])]),_:1})):V("",!0)]),_:1})]),_:1}))]),_:1})])}const Y=y(R,[["render",U]]);export{Y as default};
