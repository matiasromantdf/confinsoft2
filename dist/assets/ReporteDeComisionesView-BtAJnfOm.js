import{aa as p,ab as g,ac as d,ad as a,an as V,af as x,ag as m,h as t,ak as r,al as i,ae as _,am as v,l as e,aj as C,ap as c,z as b,ai as y,aw as k,az as u,ax as h,F as w,ay as B}from"./index-Dse_sjTz.js";const S={data(){return{url:"https://api-tpv.confinsoft.com/public",ventas:[],comisionistas:[],desde:"",hasta:"",comisionista:"",cargando:!1}},methods:{getComisionistas(){m.get(this.url+"/"+this.usuario.tpv+"/comisionistas",{headers:{Authorization:this.usuario.token}}).then(s=>{this.comisionistas=s.data}).catch(s=>{console.log(s)})},getVentas(){this.cargando=!0,m.get(this.url+"/"+this.usuario.tpv+"/ventas/filtradas",{headers:{Authorization:this.usuario.token},params:{desde:this.desde,hasta:this.hasta,param:"periodoYcomisiones"}}).then(s=>{console.log(s.data),this.ventas=s.data}).catch(s=>{console.log(s)}).finally(()=>this.cargando=!1)}},mounted(){this.usuario.rol!=1&&this.$router.push("/no-autorizado"),this.getComisionistas();let s=new Date;this.desde=s.toISOString().substr(0,10),this.hasta=s.toISOString().substr(0,10)},setup(){return{usuario:x()}}},T={class:"d-flex align-start flex-row"},z={class:"ml-4"};function D(s,l,F,N,o,f){return d(),g(V,null,{default:a(()=>[t(r,null,{default:a(()=>[t(i,null,{default:a(()=>[t(_,null,{default:a(()=>[t(v,null,{default:a(()=>[...l[3]||(l[3]=[e("h3",null,"Reporte de comisiones",-1)])]),_:1}),t(C,null,{default:a(()=>[t(r,{class:"mt-1"},{default:a(()=>[t(i,{cols:"12",md:"3"},{default:a(()=>[t(c,{label:"desde",modelValue:o.desde,"onUpdate:modelValue":l[0]||(l[0]=n=>o.desde=n),type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(i,{cols:"12",md:"3"},{default:a(()=>[t(c,{label:"hasta",modelValue:o.hasta,"onUpdate:modelValue":l[1]||(l[1]=n=>o.hasta=n),type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(i,{cols:"12",md:"2"}),t(i,{cols:"12",md:"2"}),t(i,{cols:"12",md:"2",class:"text-center"},{default:a(()=>[t(b,{loading:o.cargando,color:"primary",onClick:l[2]||(l[2]=n=>f.getVentas())},{default:a(()=>[...l[4]||(l[4]=[y("Buscar",-1)])]),_:1},8,["loading"])]),_:1})]),_:1}),t(r,null,{default:a(()=>[t(i,null,{default:a(()=>[t(k,null,{default:a(()=>[l[5]||(l[5]=e("thead",null,[e("tr",null,[e("th",{class:"text-left"},"Total"),e("th",{class:"text-left"},"Ganancia"),e("th",{class:"text-left"},"Comisiones")])],-1)),e("tbody",null,[e("tr",null,[e("td",null,u(o.ventas.total),1),e("td",null,u(o.ventas.ganancia),1),e("td",null,[(d(!0),h(w,null,B(o.ventas.comisionistas,n=>(d(),h("tr",T,[e("td",null,u(n.nombre)+" : ",1),e("td",z,"$"+u(n.comision),1)]))),256))])])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const U=p(S,[["render",D]]);export{U as default};
