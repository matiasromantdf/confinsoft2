import{_ as g,W as D,X as v,Y as C,Z as a,a5 as x,a0 as b,b as e,a3 as r,$ as m,ab as f,a4 as p,a2 as i,a8 as _,V as u,a1 as d,ac as h,av as k,d as w,ad as T,aw as y,ax as B,ay as I,ae as S,aa as U,a7 as V}from"./index-DpFWd6SB.js";const A={data(){return{cargando:!1,compras:[],cabeceras:[{title:"Fecha",value:"fecha"},{title:"Proveedor",key:"proveedor",value:t=>t.proveedor.nombre},{title:"Monto",value:"monto"},{title:"Acciones",value:"acciones",sortable:!1}],url:"https://api-tpv.confinsoft.com/public",dialogoDetalle:!1,itemsDelDetalle:[],desde:"",hasta:""}},methods:{getCompras(){this.cargando=!0;let t=this.url+"/"+this.usuario.tpv+"/compras/filtradas";D.get(t,{params:{desde:this.desde,hasta:this.hasta,param:"historial"},headers:{Authorization:this.usuario.token}}).then(l=>{this.compras=l.data,this.cargando=!1}).catch(l=>{console.error(l),this.cargando=!1})},mostrarDetalle(t){this.itemsDelDetalle=t.detalles,this.itemsDelDetalle.forEach(l=>{delete l.updated_at,delete l.created_at,delete l.compra_id,delete l.articulo_id,delete l.tpv,delete l.id,l.item=l.articulo.descripcion,delete l.articulo}),this.dialogoDetalle=!0},eliminar(t){console.log("eliminar",t)},reimprimir(t){console.log("reimprimir",t)}},mounted(){this.usuario.rol!=1&&this.$router.push({name:"no-autorizado"}),this.desde=new Date().toISOString().substr(0,10),this.hasta=new Date().toISOString().substr(0,10)},setup(){return{usuario:v()}}},F=V("h3",null,"Historial de Compras",-1),L=V("h3",null,"Detalle de la compra",-1);function N(t,l,z,H,s,n){return b(),C(x,null,{default:a(()=>[e(i,null,{default:a(()=>[e(r,null,{default:a(()=>[e(m,null,{default:a(()=>[e(f,null,{default:a(()=>[F]),_:1}),e(p,null,{default:a(()=>[e(i,{class:"mt-1"},{default:a(()=>[e(r,{cols:"12",md:"4"},{default:a(()=>[e(_,{label:"desde",modelValue:s.desde,"onUpdate:modelValue":l[0]||(l[0]=o=>s.desde=o),type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"4"},{default:a(()=>[e(_,{label:"hasta",modelValue:s.hasta,"onUpdate:modelValue":l[1]||(l[1]=o=>s.hasta=o),type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(r,{cols:"12",md:"4",class:"text-center"},{default:a(()=>[e(u,{loading:s.cargando,color:"primary",onClick:l[2]||(l[2]=o=>n.getCompras())},{default:a(()=>[d("Buscar")]),_:1},8,["loading"])]),_:1})]),_:1}),e(i,null,{default:a(()=>[e(r,null,{default:a(()=>[e(h,{items:s.compras,headers:s.cabeceras,"no-data-text":"sin datos","items-per-page-text":"filas"},{"item.acciones":a(({item:o})=>[e(k,null,{activator:a(({props:c})=>[e(u,w({variant:"flat"},c),{default:a(()=>[e(T,null,{default:a(()=>[d("mdi-dots-vertical")]),_:1})]),_:2},1040)]),default:a(()=>[e(y,null,{default:a(()=>[e(B,{onClick:c=>n.mostrarDetalle(o)},{default:a(()=>[e(I,null,{default:a(()=>[d("Ver detalle")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["items","headers"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(U,{modelValue:s.dialogoDetalle,"onUpdate:modelValue":l[4]||(l[4]=o=>s.dialogoDetalle=o),"max-width":"90%"},{default:a(()=>[e(m,null,{default:a(()=>[e(f,null,{default:a(()=>[L]),_:1}),e(p,null,{default:a(()=>[e(i,null,{default:a(()=>[e(r,null,{default:a(()=>[e(h,{items:s.itemsDelDetalle,"items-per-page-text":"Filas"},null,8,["items"])]),_:1})]),_:1})]),_:1}),e(S,null,{default:a(()=>[e(u,{onClick:l[3]||(l[3]=o=>s.dialogoDetalle=!1)},{default:a(()=>[d("Cerrar")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const O=g(A,[["render",N]]);export{O as default};
