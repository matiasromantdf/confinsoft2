import{_ as p,am as g,aj as C,Z as u,b as a,$ as t,a8 as f,a1 as h,a2 as v,a6 as V,a7 as b,a0 as x,ae as T,af as d,a4 as n,an as k,Y as E,ao as w,ap as y,ab as N,V as D,ah as _,aa as B}from"./index-bJC8aIj-.js";const L={data(){return{search:"",headers:[{title:"Nombre",value:"nombre"},{title:"Comentarios",value:"comentarios"},{title:"Acciones",value:"actions",sortable:!1}],categorias:[],url:"https://api-tpv.confinsoft.com/public",cargando:!1,categoriaToEdit:{},dialogo:!1,textoItems:"Categorias por pÃ¡gina",cargandoText:"cargando categorias..."}},methods:{editarCategoria(o){console.log(o),this.categoriaToEdit=Object.assign({},o),console.log(this.categoriaToEdit),this.dialogo=!0},getCategorias(){this.cargando=!0,v.get(this.url+"/"+this.usuario.tpv+"/categorias",{headers:{Authorization:this.usuario.token}}).then(o=>{this.categorias=o.data}).catch(o=>{console.log(o)}).finally(()=>this.cargando=!1)},buscar(o){if(this.search.length>1){this.cargando=!0;let e=[];this.categorias.forEach(i=>{(i.nombre.toLowerCase().includes(this.search.toLowerCase())||i.comentarios!=null&&i.comentarios.toLowerCase().includes(this.search.toLowerCase()))&&e.push(i)}),this.categorias=e,this.cargando=!1}this.search.length==0&&this.getCategorias()},cerrarDialogo(){this.dialogo=!1,this.categoriaToEdit={}}},setup(){return{usuario:h()}},mounted(){this.getCategorias()},components:{NuevaCategoriaComponent:g}};function A(o,e,i,I,s,l){const c=g;return u(),C("div",null,[a(f,null,{default:t(()=>[a(V,null,{default:t(()=>[a(b,null,{default:t(()=>[a(x,null,{default:t(()=>[a(T,{headers:s.headers,items:s.categorias,"item-key":"id",class:"elevation-5 border",loading:s.cargando,hover:!0,"loading-text":s.cargandoText,"items-per-page-text":s.textoItems},{top:t(()=>[a(k,null,{default:t(()=>[a(y,null,{default:t(()=>[...e[5]||(e[5]=[n("Categorias",-1)])]),_:1}),a(N,{class:"mx-4",inset:"",vertical:""}),a(D,{onClick:e[0]||(e[0]=r=>s.dialogo=!0),"prepend-icon":"mdi-plus",class:"mr-4 border",tonal:"",color:"primary"},{default:t(()=>[...e[6]||(e[6]=[n("Nueva",-1)])]),_:1}),s.dialogo?(u(),E(c,{key:0,onActualizarCategorias:e[1]||(e[1]=r=>l.getCategorias()),toEdit:s.categoriaToEdit,onCerrarDialogo:e[2]||(e[2]=r=>l.cerrarDialogo())},null,8,["toEdit"])):w("",!0),a(_),a(B,{modelValue:s.search,"onUpdate:modelValue":e[3]||(e[3]=r=>s.search=r),"append-icon":"mdi-magnify",label:"Buscar",onKeyup:e[4]||(e[4]=r=>l.buscar(r)),"single-line":"","hide-details":"",variant:"underlined"},null,8,["modelValue"])]),_:1})]),"item.actions":t(({item:r})=>[a(d,{small:"",class:"mr-2",onClick:m=>l.editarCategoria(r),color:"blue"},{default:t(()=>[...e[7]||(e[7]=[n("mdi-pencil",-1)])]),_:1},8,["onClick"]),a(d,{small:"",onClick:m=>o.eliminarCategoria(r),color:"red"},{default:t(()=>[...e[8]||(e[8]=[n("mdi-delete",-1)])]),_:1},8,["onClick"])]),_:1},8,["headers","items","loading","loading-text","items-per-page-text"])]),_:1})]),_:1})]),_:1})]),_:1})])}const z=p(L,[["render",A]]);export{z as default};
