import{_,aj as g,Z as h,b as a,$ as t,a8 as c,a2 as v,a1 as V,a6 as l,a7 as i,a0 as w,ad as x,h as n,a5 as b,al as s,ag as C,V as d,a4 as f}from"./index-CMDk-GLs.js";const p=new MercadoPago("APP_USR-542986ce-8be5-49a9-8fb9-99ac00e3be2f");p.bricks();const S={data(){return{url:"https://api-tpv.confinsoft.com/public",cargando:!1,cargandoText:"cargando suscripción...",suscripcion:{}}},setup(){return{usuario:V()}},mounted(){},methods:{test(){this.cargando=!0;let r={tpv:this.usuario.tpv};v.post(this.url+"/"+this.usuario.tpv+"/comercio/pagarSuscripcion",r,{headers:{Authorization:this.usuario.token}}).then(e=>{console.log(e.data),p.bricks().create("wallet","wallet_container",{initialization:{preferenceId:e.data},customization:{texts:{valueProp:"smart_option"}}})}).catch(e=>{console.log(e)}).finally(()=>this.cargando=!1)},adherirseDA(){window.location.href="https://www.mercadopago.com.ar/subscriptions/checkout?preapproval_plan_id=2c93808490c3cfa40190ccdf376202c5"},formatearfecha(r){return new Date(r).toLocaleDateString()},formatearMoneda(r){return parseFloat(r).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}},computed:{proximoVencimiento(){let r=new Date(this.usuario.horaServidor);return r.setDate(r.getDate()+30),r.toLocaleDateString()}}},k={class:"text-h6"};function D(r,e,y,u,m,o){return h(),g("div",null,[a(c,null,{default:t(()=>[a(l,null,{default:t(()=>[a(i,null,{default:t(()=>[a(w,{elevation:"10",loading:m.cargando},{default:t(()=>[a(x,null,{default:t(()=>[...e[1]||(e[1]=[n("h2",null,"Suscripción",-1)])]),_:1}),a(b,null,{default:t(()=>[a(c,null,{default:t(()=>[a(l,null,{default:t(()=>[a(i,null,{default:t(()=>[e[2]||(e[2]=n("br",null,null,-1)),n("p",k,"El vencimiento de tu suscripción es el "+s(o.formatearfecha(u.usuario.comercio.vencimiento))+" y el costo de renovación de ARS$"+s(o.formatearMoneda(u.usuario.comercio.precio)),1)]),_:1})]),_:1})]),_:1})]),_:1}),a(C,null,{default:t(()=>[a(l,null,{default:t(()=>[a(i,{justify:"center",align:"center"},{default:t(()=>[a(d,{color:"primary",variant:"outlined",onClick:o.test},{default:t(()=>[f("Pagar suscripción hasta el "+s(o.proximoVencimiento),1)]),_:1},8,["onClick"])]),_:1}),a(i,{justify:"center",align:"center"},{default:t(()=>[a(d,{color:"green",variant:"outlined",onClick:e[0]||(e[0]=A=>o.adherirseDA())},{default:t(()=>[...e[3]||(e[3]=[f("Adherirse a débito automático",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}),a(l,{justify:"center"},{default:t(()=>[a(i,{md:"6",sm:"12"},{default:t(()=>[...e[4]||(e[4]=[n("div",{id:"wallet_container"},null,-1)])]),_:1})]),_:1})]),_:1})])}const P=_(S,[["render",D]]);export{P as default};
