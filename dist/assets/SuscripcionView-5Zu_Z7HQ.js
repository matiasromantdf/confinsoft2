import{_ as p,aj as m,Z as g,b as a,$ as e,a8 as d,a2 as _,a1 as h,a6 as i,a7 as r,a0 as V,ad as v,h as l,a5 as w,al as s,ag as b,V as x,a4 as P}from"./index-DQ2oVexP.js";const f=new MercadoPago("APP_USR-542986ce-8be5-49a9-8fb9-99ac00e3be2f");f.bricks();const C={data(){return{url:"https://api-tpv.confinsoft.com/public",cargando:!1,cargandoPago:!1,cargandoText:"cargando suscripción...",suscripcion:{}}},setup(){return{usuario:h()}},mounted(){},methods:{test(){this.cargandoPago=!0;let o={tpv:this.usuario.tpv};_.post(this.url+"/"+this.usuario.tpv+"/comercio/pagarSuscripcion",o,{headers:{Authorization:this.usuario.token}}).then(t=>{console.log(t.data),f.bricks().create("wallet","wallet_container",{initialization:{preferenceId:t.data},customization:{texts:{valueProp:"smart_option"}}})}).catch(t=>{console.log(t)}).finally(()=>this.cargandoPago=!1)},adherirseDA(){window.location.href="https://www.mercadopago.com.ar/subscriptions/checkout?preapproval_plan_id=2c93808490c3cfa40190ccdf376202c5"},formatearfecha(o){return new Date(o).toLocaleDateString()},formatearMoneda(o){return parseFloat(o).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}},computed:{proximoVencimiento(){let o=new Date(this.usuario.comercio.vencimiento);return o.setMonth(o.getMonth()+1),o.toLocaleDateString()}}},S={class:"text-h6"};function k(o,t,y,u,c,n){return g(),m("div",null,[a(d,null,{default:e(()=>[a(i,null,{default:e(()=>[a(r,null,{default:e(()=>[a(V,{elevation:"10",loading:c.cargando},{default:e(()=>[a(v,null,{default:e(()=>[...t[0]||(t[0]=[l("h2",null,"Suscripción",-1)])]),_:1}),a(w,null,{default:e(()=>[a(d,null,{default:e(()=>[a(i,null,{default:e(()=>[a(r,null,{default:e(()=>[t[1]||(t[1]=l("br",null,null,-1)),l("p",S,"El vencimiento de tu suscripción es el "+s(n.formatearfecha(u.usuario.comercio.vencimiento))+" y el costo de renovación de ARS$"+s(n.formatearMoneda(u.usuario.comercio.precio)),1)]),_:1})]),_:1})]),_:1})]),_:1}),a(b,null,{default:e(()=>[a(i,null,{default:e(()=>[a(r,{justify:"center",align:"center"},{default:e(()=>[a(x,{color:"primary",variant:"outlined",loading:c.cargandoPago,disabled:c.cargandoPago,onClick:n.test},{default:e(()=>[P("Pagar suscripción hasta el "+s(n.proximoVencimiento),1)]),_:1},8,["loading","disabled","onClick"])]),_:1}),a(r,{justify:"center",align:"center"})]),_:1})]),_:1})]),_:1},8,["loading"])]),_:1})]),_:1}),a(i,{justify:"center"},{default:e(()=>[a(r,{md:"6",sm:"12"},{default:e(()=>[...t[2]||(t[2]=[l("div",{id:"wallet_container"},null,-1)])]),_:1})]),_:1})]),_:1})])}const A=p(C,[["render",k]]);export{A as default};
