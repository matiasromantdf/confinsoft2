import{_ as b,a1 as g,a2 as V,aq as k,aj as v,Z as p,b as o,$ as t,ac as T,a0 as C,ar as U,as as N,a5 as y,a8 as x,a6 as n,a7 as u,aa as d,ag as z,ah as E,V as f,a4 as m,Y as w,ao as B,ae as S,af as _,an as j,ap as I,ab as O}from"./index-CE9qPGaY.js";const F={data(){return{comisionista:{nombre:"",apellido:"",telefono:"",id:""},url:"https://api-tpv.confinsoft.com/public",cargando:!1,dialogo:!0,nombreRule:[i=>i?i.length<3?"El nombre debe tener al menos 3 caracteres":!0:"El nombre es requerido"],apellidoRule:[i=>i?i.length<3?"El apellido debe tener al menos 3 caracteres":!0:"El apellido es requerido"],valid:!1}},methods:{guardar(){if(this.valid)V.put(this.url+"/"+this.usuario.tpv+"/comisionistas",this.comisionista,{headers:{Authorization:this.usuario.token}}).then(i=>{i.data.id&&(k.fire({title:"Datos del barbero editados correctamente",icon:"success"}),this.$emit("cerrar"),this.$emit("actualizar"))}).catch(i=>{console.log(i)});else return},cerrarDialogo(){this.$emit("cerrar")}},setup(){return{usuario:g()}},mounted(){this.edit&&(this.comisionista=this.edit)},emits:["actualizar","cerrar"],props:{edit:{type:Object},user:{type:Object}}};function G(i,e,h,c,l,s){return p(),v("div",null,[o(T,{width:"500",class:"rounded-xl",modelValue:l.dialogo,"onUpdate:modelValue":e[6]||(e[6]=a=>l.dialogo=a)},{default:t(()=>[o(C,{title:"Editar datos"},{default:t(()=>[o(U,{modelValue:l.valid,"onUpdate:modelValue":e[4]||(e[4]=a=>l.valid=a),onSubmit:e[5]||(e[5]=N(a=>s.guardar(),["prevent"]))},{default:t(()=>[o(y,null,{default:t(()=>[o(x,null,{default:t(()=>[o(n,null,{default:t(()=>[o(u,{cols:"9"},{default:t(()=>[o(d,{modelValue:l.comisionista.nombre,"onUpdate:modelValue":e[0]||(e[0]=a=>l.comisionista.nombre=a),label:"Nombre",variant:"outlined",required:"",rules:l.nombreRule},null,8,["modelValue","rules"])]),_:1})]),_:1}),o(n,null,{default:t(()=>[o(u,{cols:"9"},{default:t(()=>[o(d,{modelValue:l.comisionista.apellido,"onUpdate:modelValue":e[1]||(e[1]=a=>l.comisionista.apellido=a),label:"Nombre",variant:"outlined",required:"",rules:l.apellidoRule},null,8,["modelValue","rules"])]),_:1})]),_:1}),o(n,null,{default:t(()=>[o(u,{cols:"4"},{default:t(()=>[o(d,{modelValue:l.comisionista.telefono,"onUpdate:modelValue":e[2]||(e[2]=a=>l.comisionista.telefono=a),label:"Telefono",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),o(z,null,{default:t(()=>[o(E),o(f,{text:"Cerrar",onClick:e[3]||(e[3]=a=>s.cerrarDialogo())}),o(f,{color:"success",type:"submit"},{default:t(()=>[...e[7]||(e[7]=[m("Guardar",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])])}const D=b(F,[["render",G]]),K={data(){return{comisionista:{nombre:"",apellido:"",telefono:""},url:"https://api-tpv.confinsoft.com/public",cargando:!1,dialogo:!1,nombreRule:[i=>i?i.length<3?"El nombre debe tener al menos 3 caracteres":!0:"El nombre es requerido"],apellidoRule:[i=>i?i.length<3?"El apellido debe tener al menos 3 caracteres":!0:"El apellido es requerido"],valid:!1}},methods:{guardar(){if(this.valid)V.post(this.url+"/"+this.usuario.tpv+"/comisionistas",this.comisionista,{headers:{Authorization:this.usuario.token}}).then(i=>{i.data.id&&(k.fire({title:"Datos del barbero guardados correctamente",icon:"success"}),this.$emit("actualizar"),this.dialogo=!1)}).catch(i=>{console.log(i)});else return},cerrarDialogo(){this.dialogo=!1}},setup(){return{usuario:g()}},mounted(){},emits:["actualizar"]};function L(i,e,h,c,l,s){return p(),v("div",null,[o(f,{onClick:e[0]||(e[0]=a=>l.dialogo=!0),"prepend-icon":"mdi-plus",class:"mr-4 border",tonal:"",color:"primary"},{default:t(()=>[...e[8]||(e[8]=[m("Nuevo",-1)])]),_:1}),o(T,{width:"500",class:"rounded-xl",modelValue:l.dialogo,"onUpdate:modelValue":e[7]||(e[7]=a=>l.dialogo=a)},{default:t(()=>[o(C,{title:"Nuevo Barbero"},{default:t(()=>[o(U,{modelValue:l.valid,"onUpdate:modelValue":e[5]||(e[5]=a=>l.valid=a),onSubmit:e[6]||(e[6]=N(a=>s.guardar(),["prevent"]))},{default:t(()=>[o(y,null,{default:t(()=>[o(x,null,{default:t(()=>[o(n,null,{default:t(()=>[o(u,{cols:"9"},{default:t(()=>[o(d,{modelValue:l.comisionista.nombre,"onUpdate:modelValue":e[1]||(e[1]=a=>l.comisionista.nombre=a),label:"Nombre",variant:"outlined",required:"",rules:l.nombreRule},null,8,["modelValue","rules"])]),_:1})]),_:1}),o(n,null,{default:t(()=>[o(u,{cols:"9"},{default:t(()=>[o(d,{modelValue:l.comisionista.apellido,"onUpdate:modelValue":e[2]||(e[2]=a=>l.comisionista.apellido=a),label:"Apellido",variant:"outlined",required:"",rules:l.apellidoRule},null,8,["modelValue","rules"])]),_:1})]),_:1}),o(n,null,{default:t(()=>[o(u,{cols:"4"},{default:t(()=>[o(d,{modelValue:l.comisionista.telefono,"onUpdate:modelValue":e[3]||(e[3]=a=>l.comisionista.telefono=a),label:"Telefono",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),o(z,null,{default:t(()=>[o(E),o(f,{text:"Cerrar",onClick:e[4]||(e[4]=a=>s.cerrarDialogo())}),o(f,{color:"success",type:"submit"},{default:t(()=>[...e[9]||(e[9]=[m("Guardar",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])])}const q=b(K,[["render",L]]),M={data(){return{search:"",headers:[{title:"Nombre",value:"nombre"},{title:"Apellido",value:"apellido"},{title:"Teléfono",value:"telefono"},{title:"Acciones",value:"actions",sortable:!1}],comisionistas:[],url:"https://api-tpv.confinsoft.com/public",cargando:!1,comisionistaToEdit:{},modalEditar:!1,textoItems:"Clientes por página",cargandoText:"cargando clientes..."}},methods:{editar(i){this.comisionistaToEdit=Object.assign({},i),this.modalEditar=!0},getComisionistas(){this.cargando=!0,V.get(this.url+"/"+this.usuario.tpv+"/comisionistas",{headers:{Authorization:this.usuario.token}}).then(i=>{this.comisionistas=i.data}).catch(i=>{console.log(i)}).finally(()=>this.cargando=!1)},eliminarCliente(i){alert("eliminar cliente"+i.nombre)},buscar(){console.log("buscando")}},setup(){return{usuario:g()}},mounted(){this.usuario.rol!=1&&this.$router.push("/no-autorizado"),this.getComisionistas()},components:{NuevoComisionistaComponent:q,EditarComisionistaComponent:D}};function Y(i,e,h,c,l,s){const a=q,A=D;return p(),v("div",null,[o(x,null,{default:t(()=>[o(n,null,{default:t(()=>[o(u,null,{default:t(()=>[o(C,null,{default:t(()=>[o(S,{headers:l.headers,items:l.comisionistas,"item-key":"id",class:"elevation-5 border",loading:l.cargando,hover:!0,"loading-text":l.cargandoText,"items-per-page-text":l.textoItems},{top:t(()=>[o(j,null,{default:t(()=>[o(I,null,{default:t(()=>[...e[5]||(e[5]=[m("Barberos",-1)])]),_:1}),o(O,{class:"mx-4",inset:"",vertical:""}),o(a,{onActualizar:e[0]||(e[0]=r=>s.getComisionistas())}),o(E),o(d,{modelValue:l.search,"onUpdate:modelValue":e[1]||(e[1]=r=>l.search=r),"append-icon":"mdi-magnify",label:"Buscar",onKeyup:e[2]||(e[2]=r=>s.buscar()),"single-line":"","hide-details":"",variant:"underlined"},null,8,["modelValue"])]),_:1})]),"item.actions":t(({item:r})=>[o(_,{small:"",class:"mr-2",onClick:R=>s.editar(r),color:"blue"},{default:t(()=>[...e[6]||(e[6]=[m("mdi-pencil",-1)])]),_:1},8,["onClick"]),o(_,{small:"",onClick:R=>i.eliminar(r),color:"red"},{default:t(()=>[...e[7]||(e[7]=[m("mdi-delete",-1)])]),_:1},8,["onClick"])]),_:1},8,["headers","items","loading","loading-text","items-per-page-text"])]),_:1})]),_:1})]),_:1})]),_:1}),l.modalEditar?(p(),w(A,{key:0,edit:l.comisionistaToEdit,user:c.usuario,onActualizar:e[3]||(e[3]=r=>s.getComisionistas()),onCerrar:e[4]||(e[4]=r=>l.modalEditar=!1)},null,8,["edit","user"])):B("",!0)])}const H=b(M,[["render",Y]]);export{H as default};
