import{g as R,p as X,u as Ae,r as q,c as S,a as Y,V as F,b as a,m as W,f as Ie,o as ve,d as De,e as Pe,s as Ue,h as c,n as ae,i as K,F as le,k as fe,j as Ee,l as ze,q as Me,t as Ne,v as Z,w as We,x as U,y as pe,z as Re,A as ge,B as _e,C as Xe,D as be,E as he,G as Ye,H as je,I as He,M as Ge,J as Le,K as Oe,L as qe,N as $,O as Ke,P as Je,Q as Qe,R as Ze,S as $e,T as ie,U as eo,W as oo,X as to,_ as ao,Y as T,Z as k,$ as r,a0 as H,a1 as lo,a2 as G,a3 as ro,a4 as y,a5 as L,a6 as h,a7 as d,a8 as J,a9 as O,aa as se,ab as P,ac as Q,ad as m,ae as E,af as no,ag as io,ah as so,ai as uo,aj as co,ak as ue,al as mo,am as N}from"./index-DPNMmaRy.js";import{V as de}from"./VSwitch-CYzr7RES.js";const re=Symbol.for("vuetify:v-tabs"),vo=X({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...ve(De({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),ee=R()({name:"VTab",props:vo(),setup(o,e){let{slots:i,attrs:n}=e;const{textColorClasses:l,textColorStyles:s}=Ae(()=>o.sliderColor),u=q(),t=q(),v=S(()=>o.direction==="horizontal"),V=S(()=>{var C,f;return((f=(C=u.value)==null?void 0:C.group)==null?void 0:f.isSelected.value)??!1});function A(C){var g,p;let{value:f}=C;if(f){const x=(p=(g=u.value)==null?void 0:g.$el.parentElement)==null?void 0:p.querySelector(".v-tab--selected .v-tab__slider"),z=t.value;if(!x||!z)return;const j=getComputedStyle(x).color,I=x.getBoundingClientRect(),D=z.getBoundingClientRect(),_=v.value?"x":"y",b=v.value?"X":"Y",w=v.value?"right":"bottom",B=v.value?"width":"height",ke=I[_],Se=D[_],M=ke>Se?I[w]-D[w]:I[_]-D[_],Fe=Math.sign(M)>0?v.value?"right":"bottom":Math.sign(M)<0?v.value?"left":"top":"center",Be=(Math.abs(M)+(Math.sign(M)<0?I[B]:D[B]))/Math.max(I[B],D[B])||0,Te=I[B]/D[B]||0,ne=1.5;Pe(z,{backgroundColor:[j,"currentcolor"],transform:[`translate${b}(${M}px) scale${b}(${Te})`,`translate${b}(${M/ne}px) scale${b}(${(Be-1)/ne+1})`,"none"],transformOrigin:Array(3).fill(Fe)},{duration:225,easing:Ue})}}return Y(()=>{const C=F.filterProps(o);return a(F,W({symbol:re,ref:u,class:["v-tab",o.class],style:o.style,tabindex:V.value?0:-1,role:"tab","aria-selected":String(V.value),active:!1},C,n,{block:o.fixed,maxWidth:o.fixed?300:void 0,"onGroup:selected":A}),{...i,default:()=>{var f;return c(le,null,[((f=i.default)==null?void 0:f.call(i))??o.text,!o.hideSlider&&c("div",{ref:t,class:K(["v-tab__slider",l.value]),style:ae(s.value)},null)])}})}),Ie({},u)}}),fo=o=>{const{touchstartX:e,touchendX:i,touchstartY:n,touchendY:l}=o,s=.5,u=16;o.offsetX=i-e,o.offsetY=l-n,Math.abs(o.offsetY)<s*Math.abs(o.offsetX)&&(o.left&&i<e-u&&o.left(o),o.right&&i>e+u&&o.right(o)),Math.abs(o.offsetX)<s*Math.abs(o.offsetY)&&(o.up&&l<n-u&&o.up(o),o.down&&l>n+u&&o.down(o))};function po(o,e){var n;const i=o.changedTouches[0];e.touchstartX=i.clientX,e.touchstartY=i.clientY,(n=e.start)==null||n.call(e,{originalEvent:o,...e})}function go(o,e){var n;const i=o.changedTouches[0];e.touchendX=i.clientX,e.touchendY=i.clientY,(n=e.end)==null||n.call(e,{originalEvent:o,...e}),fo(e)}function _o(o,e){var n;const i=o.changedTouches[0];e.touchmoveX=i.clientX,e.touchmoveY=i.clientY,(n=e.move)==null||n.call(e,{originalEvent:o,...e})}function bo(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:o.left,right:o.right,up:o.up,down:o.down,start:o.start,move:o.move,end:o.end};return{touchstart:i=>po(i,e),touchend:i=>go(i,e),touchmove:i=>_o(i,e)}}function ho(o,e){var t;const i=e.value,n=i!=null&&i.parent?o.parentElement:o,l=(i==null?void 0:i.options)??{passive:!0},s=(t=e.instance)==null?void 0:t.$.uid;if(!n||s===void 0)return;const u=bo(e.value);n._touchHandlers=n._touchHandlers??Object.create(null),n._touchHandlers[s]=u,fe(u).forEach(v=>{n.addEventListener(v,u[v],l)})}function Vo(o,e){var s,u;const i=(s=e.value)!=null&&s.parent?o.parentElement:o,n=(u=e.instance)==null?void 0:u.$.uid;if(!(i!=null&&i._touchHandlers)||n===void 0)return;const l=i._touchHandlers[n];fe(l).forEach(t=>{i.removeEventListener(t,l[t])}),delete i._touchHandlers[n]}const oe={mounted:ho,unmounted:Vo},Ve=Symbol.for("vuetify:v-window"),ye=Symbol.for("vuetify:v-window-group"),Ce=X({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:o=>typeof o=="boolean"||o==="hover"},verticalArrows:[Boolean,String],touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},..._e(),...ge(),...Re()},"VWindow"),ce=R()({name:"VWindow",directives:{vTouch:oe},props:Ce(),emits:{"update:modelValue":o=>!0},setup(o,e){let{slots:i}=e;const{themeClasses:n}=Ee(o),{isRtl:l}=ze(),{t:s}=Me(),u=Ne(o,ye),t=q(),v=S(()=>l.value?!o.reverse:o.reverse),V=Z(!1),A=S(()=>{const _=o.direction==="vertical"?"y":"x",w=(v.value?!V.value:V.value)?"-reverse":"";return`v-window-${_}${w}-transition`}),C=Z(0),f=q(void 0),g=S(()=>u.items.value.findIndex(_=>u.selected.value.includes(_.id)));We(g,(_,b)=>{const w=u.items.value.length,B=w-1;w<=2?V.value=_<b:_===B&&b===0?V.value=!0:_===0&&b===B?V.value=!1:V.value=_<b}),Xe(Ve,{transition:A,isReversed:V,transitionCount:C,transitionHeight:f,rootRef:t});const p=U(()=>o.continuous||g.value!==0),x=U(()=>o.continuous||g.value!==u.items.value.length-1);function z(){p.value&&u.prev()}function j(){x.value&&u.next()}const I=S(()=>{const _=[],b={icon:l.value?o.nextIcon:o.prevIcon,class:`v-window__${v.value?"right":"left"}`,onClick:u.prev,"aria-label":s("$vuetify.carousel.prev")};_.push(p.value?i.prev?i.prev({props:b}):a(F,b,null):c("div",null,null));const w={icon:l.value?o.prevIcon:o.nextIcon,class:`v-window__${v.value?"left":"right"}`,onClick:u.next,"aria-label":s("$vuetify.carousel.next")};return _.push(x.value?i.next?i.next({props:w}):a(F,w,null):c("div",null,null)),_}),D=S(()=>o.touch===!1?o.touch:{...{left:()=>{v.value?z():j()},right:()=>{v.value?j():z()},start:b=>{let{originalEvent:w}=b;w.stopPropagation()}},...o.touch===!0?{}:o.touch});return Y(()=>pe(a(o.tag,{ref:t,class:K(["v-window",{"v-window--show-arrows-on-hover":o.showArrows==="hover","v-window--vertical-arrows":!!o.verticalArrows},n.value,o.class]),style:ae(o.style)},{default:()=>{var _,b;return[c("div",{class:"v-window__container",style:{height:f.value}},[(_=i.default)==null?void 0:_.call(i,{group:u}),o.showArrows!==!1&&c("div",{class:K(["v-window__controls",{"v-window__controls--left":o.verticalArrows==="left"||o.verticalArrows===!0},{"v-window__controls--right":o.verticalArrows==="right"}])},[I.value])]),(b=i.additional)==null?void 0:b.call(i,{group:u})]}}),[[oe,D.value]])),{group:u}}}),yo=X({...ve(Ce(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),xe=R()({name:"VTabsWindow",props:yo(),emits:{"update:modelValue":o=>!0},setup(o,e){let{slots:i}=e;const n=be(re,null),l=he(o,"modelValue"),s=S({get(){var u;return l.value!=null||!n?l.value:(u=n.items.value.find(t=>n.selected.value.includes(t.id)))==null?void 0:u.value},set(u){l.value=u}});return Y(()=>{const u=ce.filterProps(o);return a(ce,W({_as:"VTabsWindow"},u,{modelValue:s.value,"onUpdate:modelValue":t=>s.value=t,class:["v-tabs-window",o.class],style:o.style,mandatory:!1,touch:!1}),i)}),{}}}),we=X({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},..._e(),...Oe(),...Le()},"VWindowItem"),me=R()({name:"VWindowItem",directives:{vTouch:oe},props:we(),emits:{"group:selected":o=>!0},setup(o,e){let{slots:i}=e;const n=be(Ve),l=Ye(o,ye),{isBooted:s}=je();if(!n||!l)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const u=Z(!1),t=S(()=>s.value&&(n.isReversed.value?o.reverseTransition!==!1:o.transition!==!1));function v(){!u.value||!n||(u.value=!1,n.transitionCount.value>0&&(n.transitionCount.value-=1,n.transitionCount.value===0&&(n.transitionHeight.value=void 0)))}function V(){var p;u.value||!n||(u.value=!0,n.transitionCount.value===0&&(n.transitionHeight.value=$((p=n.rootRef.value)==null?void 0:p.clientHeight)),n.transitionCount.value+=1)}function A(){v()}function C(p){u.value&&qe(()=>{!t.value||!u.value||!n||(n.transitionHeight.value=$(p.clientHeight))})}const f=S(()=>{const p=n.isReversed.value?o.reverseTransition:o.transition;return t.value?{name:typeof p!="string"?n.transition.value:p,onBeforeEnter:V,onAfterEnter:v,onEnterCancelled:A,onBeforeLeave:V,onAfterLeave:v,onLeaveCancelled:A,onEnter:C}:!1}),{hasContent:g}=He(o,l.isSelected);return Y(()=>a(Ge,{transition:f.value,disabled:!s.value},{default:()=>{var p;return[pe(c("div",{class:K(["v-window-item",l.selectedClass.value,o.class]),style:ae(o.style)},[g.value&&((p=i.default)==null?void 0:p.call(i))]),[[Ke,l.isSelected.value]])]}})),{groupItem:l}}}),Co=X({...we()},"VTabsWindowItem"),te=R()({name:"VTabsWindowItem",props:Co(),setup(o,e){let{slots:i}=e;return Y(()=>{const n=me.filterProps(o);return a(me,W({_as:"VTabsWindowItem"},n,{class:["v-tabs-window-item",o.class],style:o.style}),i)}),{}}});function xo(o){return o?o.map(e=>to(e)?e:{text:e,value:e}):[]}const wo=X({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...oo({mandatory:"force",selectedClass:"v-tab-item--selected"}),...eo(),...ge()},"VTabs"),ko=R()({name:"VTabs",props:wo(),emits:{"update:modelValue":o=>!0},setup(o,e){let{attrs:i,slots:n}=e;const l=he(o,"modelValue"),s=S(()=>xo(o.items)),{densityClasses:u}=Je(o),{backgroundColorClasses:t,backgroundColorStyles:v}=Qe(()=>o.bgColor),{scopeId:V}=Ze();return $e({VTab:{color:U(()=>o.color),direction:U(()=>o.direction),stacked:U(()=>o.stacked),fixed:U(()=>o.fixedTabs),sliderColor:U(()=>o.sliderColor),hideSlider:U(()=>o.hideSlider)}}),Y(()=>{const A=ie.filterProps(o),C=!!(n.window||o.items.length>0);return c(le,null,[a(ie,W(A,{modelValue:l.value,"onUpdate:modelValue":f=>l.value=f,class:["v-tabs",`v-tabs--${o.direction}`,`v-tabs--align-tabs-${o.alignTabs}`,{"v-tabs--fixed-tabs":o.fixedTabs,"v-tabs--grow":o.grow,"v-tabs--stacked":o.stacked},u.value,t.value,o.class],style:[{"--v-tabs-height":$(o.height)},v.value,o.style],role:"tablist",symbol:re},V,i),{default:()=>{var f;return[((f=n.default)==null?void 0:f.call(n))??s.value.map(g=>{var p;return((p=n.tab)==null?void 0:p.call(n,{item:g}))??a(ee,W(g,{key:g.text,value:g.value}),{default:n[`tab.${g.value}`]?()=>{var x;return(x=n[`tab.${g.value}`])==null?void 0:x.call(n,{item:g})}:void 0})})]}}),C&&a(xe,W({modelValue:l.value,"onUpdate:modelValue":f=>l.value=f,key:"tabs-window"},V),{default:()=>{var f;return[s.value.map(g=>{var p;return((p=n.item)==null?void 0:p.call(n,{item:g}))??a(te,{value:g.value},{default:()=>{var x;return(x=n[`item.${g.value}`])==null?void 0:x.call(n,{item:g})}})}),(f=n.window)==null?void 0:f.call(n)]}})])}),{}}});let So=new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:2});const Fo={data(){return{proveedores:[],url:"https://api-tpv.confinsoft.com/public",esCompraFiscal:!0,compra:{tipo_comprobante:null,punto_venta:null,numero_comprobante:"",codigo_documento_vendedor:80,cuit_proveedor:"",monto_no_fiscal:"0",neto_gravado_21:"0",iva_21:"0",neto_gravado_10_5:"0",iva_10_5:"0",neto_gravado_27:"0",iva_27:"0",neto_gravado_5:"0",iva_5:"0",neto_gravado_2_5:"0",iva_2_5:"0",exento:"0",no_gravado:"0",percepciones_iva:"0",percepciones_iibb:"0",otros_tributos:"0"},articulo:{codigo:"",cantidad:0},modalBusquedaArticulo:!1,search:"",headers:[{text:"Código",value:"codigo"},{text:"Descripción",value:"descripcion"},{text:"Precio",value:"precio"},{text:"Stock",value:"stock"},{text:"Acciones",value:"actions",sortable:!1}],articulos:[],cargando:!1,detalle:[],fecha:new Date().toISOString().substr(0,10),proveedor:"",tab:"one",cargarDetalle:!1}},mounted(){this.getProveedores()},methods:{getProveedores(){G.get(this.url+"/"+this.usuario.tpv+"/proveedores",{headers:{Authorization:this.usuario.token}}).then(o=>{this.proveedores=o.data}).catch(o=>{console.log(o)})},cargarDatosProveedor(){const o=this.proveedores.find(e=>e.id===this.proveedor);o&&o.cuit&&(this.compra.cuit_proveedor=o.cuit)},calcularTotal(){},formatearCampoMoneda(o,e){let i=e.target.value;if(i=i.replace(/[^0-9,]/g,""),!i||i===""){this.compra[o]="";return}const n=i.split(",");n.length>2&&(i=n[0]+","+n.slice(1).join("")),n.length===2&&n[1].length>2&&(i=n[0]+","+n[1].substring(0,2));const l=i.split(",");let s=l[0];const u=l[1];s&&(s=s.replace(/\B(?=(\d{3})+(?!\d))/g,".")),u!==void 0?this.compra[o]=s+","+u:this.compra[o]=s},finalizarFormato(o){let e=this.compra[o];if(!e||e==="0"||e===""){if(this.compra[o]="0,00",o.startsWith("neto_gravado_")){const n=o.replace("neto_gravado_","");this.compra["iva_"+n]="0,00"}return}e=e.toString().replace(/\./g,"").replace(",",".");const i=parseFloat(e);if(isNaN(i)){this.compra[o]="0,00";return}if(this.compra[o]=i.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2}),o.startsWith("neto_gravado_")){const n=o.replace("neto_gravado_","");let l=0;n==="21"?l=.21:n==="10_5"?l=.105:n==="27"?l=.27:n==="5"?l=.05:n==="2_5"&&(l=.025);const s=i*l;this.compra["iva_"+n]=s.toLocaleString("es-AR",{minimumFractionDigits:2,maximumFractionDigits:2})}},formatearPuntoVenta(){this.compra.punto_venta&&(this.compra.punto_venta=String(this.compra.punto_venta).padStart(5,"0"))},formatearPuntoVenta(){this.compra.punto_venta&&(this.compra.punto_venta=String(this.compra.punto_venta).padStart(5,"0"))},formatearNumeroComprobante(){this.compra.numero_comprobante&&(this.compra.numero_comprobante=String(this.compra.numero_comprobante).padStart(8,"0"))},checkEnter(o){(o.key==="Enter"||o.keyCode==="13"||o.key==="Tab")&&this.getArticulo()},buscarArticulos(){this.search.length<3||(this.cargando=!0,G.get(this.url+"/"+this.usuario.tpv+"/articulos/buscar/"+this.search,{headers:{Authorization:this.usuario.token}}).then(o=>{this.articulos=o.data.data}).catch(o=>{console.log(o)}).finally(()=>this.cargando=!1))},seleccionarArticulo(o){this.articulo.id=o.id,this.articulo.codigo=o.codigo,this.articulo.descripcion=o.descripcion,this.articulo.precio=o.precio,this.articulo.stock=o.stock,this.articulo.costo=o.costo,this.articulo.iva=o.iva,this.articulo.foto=o.foto,this.modalBusquedaArticulo=!1,this.$nextTick(()=>{document.getElementById("codigo").focus()})},agregarArticulo(){if(this.articulo.cantidad===0||!this.articulo.codigo){this.$swal("Error","Debe ingresar un artículo y una cantidad","error");return}this.articulo.subtotal=this.articulo.costo*this.articulo.cantidad,this.detalle.push({...this.articulo}),this.articulo={codigo:"",cantidad:0},this.$nextTick(()=>{document.getElementById("codigo").focus()})},getArticulo(){this.articulo.codigo&&G.get(this.url+"/"+this.usuario.tpv+"/articulos/"+this.articulo.codigo,{headers:{Authorization:this.usuario.token}}).then(o=>{if(!o.data.id){this.$swal("Artículo no encontrado","El artículo no se encuentra registrado","error");return}this.articulo=o.data,this.articulo.cantidad=0,document.getElementById("precioArticulo").focus()}).catch(o=>{this.$swal("Error","No se pudo obtener el artículo","error"),console.log(o)})},eliminarArticulo(o){this.detalle=this.detalle.filter(e=>e.codigo!==o.codigo)},guardarCompra(){if(!this.proveedor){this.$swal("Error","Debe seleccionar un proveedor","error");return}if(this.esCompraFiscal&&!this.compra.tipo_comprobante){this.$swal("Error","Debe seleccionar el tipo de comprobante","error");return}if(!this.esCompraFiscal&&this.totalCompra===0){this.$swal("Error","Debe ingresar el monto de la compra","error");return}if(this.cargarDetalle&&this.detalle.length===0){this.$swal("Error","Debe agregar al menos un artículo o desactivar la opción de cargar detalle","error");return}this.$swal({title:"¿Estás seguro?",text:"¿Deseas guardar la compra?",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, guardar",cancelButtonText:"No, cancelar"}).then(o=>{o.isConfirmed&&this.enviarDatos()})},enviarDatos(){const o=i=>{if(!i||i==="0")return 0;const n=i.toString().replace(/\./g,"").replace(",",".");return parseFloat(n)||0},e={proveedor_id:this.proveedor,fecha:this.fecha,monto:this.totalCompra,es_compra_fiscal:this.esCompraFiscal?1:0,tipo_comprobante:this.esCompraFiscal?this.compra.tipo_comprobante:null,punto_venta:this.esCompraFiscal?this.compra.punto_venta:null,numero_comprobante:this.esCompraFiscal?this.compra.numero_comprobante:null,codigo_documento_vendedor:this.esCompraFiscal?this.compra.codigo_documento_vendedor:null,cuit_proveedor:this.esCompraFiscal?this.compra.cuit_proveedor:null,neto_gravado_21:this.esCompraFiscal?o(this.compra.neto_gravado_21):0,iva_21:this.esCompraFiscal?o(this.compra.iva_21):0,neto_gravado_10_5:this.esCompraFiscal?o(this.compra.neto_gravado_10_5):0,iva_10_5:this.esCompraFiscal?o(this.compra.iva_10_5):0,neto_gravado_27:this.esCompraFiscal?o(this.compra.neto_gravado_27):0,iva_27:this.esCompraFiscal?o(this.compra.iva_27):0,neto_gravado_5:this.esCompraFiscal?o(this.compra.neto_gravado_5):0,iva_5:this.esCompraFiscal?o(this.compra.iva_5):0,neto_gravado_2_5:this.esCompraFiscal?o(this.compra.neto_gravado_2_5):0,iva_2_5:this.esCompraFiscal?o(this.compra.iva_2_5):0,exento:this.esCompraFiscal?o(this.compra.exento):0,no_gravado:this.esCompraFiscal?o(this.compra.no_gravado):0,percepciones_iva:this.esCompraFiscal?o(this.compra.percepciones_iva):0,percepciones_iibb:this.esCompraFiscal?o(this.compra.percepciones_iibb):0,otros_tributos:this.esCompraFiscal?o(this.compra.otros_tributos):0};this.cargarDetalle&&(e.detalle=JSON.stringify(this.detalle)),G.post(this.url+"/"+this.usuario.tpv+"/compras",e,{headers:{Authorization:this.usuario.token}}).then(i=>{i.data=="ok"||i.data.id?(this.$swal("Guardado","La compra se ha registrado correctamente","success"),this.resetFormulario()):this.$swal("Error","No se pudo guardar la compra","error")}).catch(i=>{this.$swal("Error","No se pudo guardar la compra","error"),console.log(i)})},resetFormulario(){this.detalle=[],this.fecha=new Date().toISOString().substr(0,10),this.proveedor="",this.cargarDetalle=!1,this.tab="one",this.compra.punto_venta=null,this.compra.numero_comprobante="",this.esCompraFiscal=!0,this.compra={tipo_comprobante:null,punto_venta:null,numero_comprobante:"",monto_no_fiscal:"0",codigo_documento_vendedor:80,cuit_proveedor:"",neto_gravado_21:"0",iva_21:"0",neto_gravado_10_5:"0",iva_10_5:"0",neto_gravado_27:"0",iva_27:"0",neto_gravado_5:"0",iva_5:"0",neto_gravado_2_5:"0",iva_2_5:"0",exento:"0",no_gravado:"0",percepciones_iva:"0",percepciones_iibb:"0",otros_tributos:"0"}},formatear(o){return So.format(o)}},computed:{totalCompra(){const o=e=>{if(!e||e==="0"||e===""||e==="0,00")return 0;const i=e.toString().replace(/\./g,"").replace(",","."),n=parseFloat(i);return isNaN(n)?0:n};return this.esCompraFiscal?o(this.compra.neto_gravado_21)+o(this.compra.iva_21)+o(this.compra.neto_gravado_10_5)+o(this.compra.iva_10_5)+o(this.compra.neto_gravado_27)+o(this.compra.iva_27)+o(this.compra.neto_gravado_5)+o(this.compra.iva_5)+o(this.compra.neto_gravado_2_5)+o(this.compra.iva_2_5)+o(this.compra.exento)+o(this.compra.no_gravado)+o(this.compra.percepciones_iva)+o(this.compra.percepciones_iibb)+o(this.compra.otros_tributos):o(this.compra.monto_no_fiscal)}},setup(){return{usuario:lo()}}},Bo={class:"text-caption"};function To(o,e,i,n,l,s){const u=ro("router-link");return k(),T(H,{class:"bg-grey-lighten-2 pl-5 pr-5 mt-1",elevation:"0"},{default:r(()=>[a(ko,{modelValue:l.tab,"onUpdate:modelValue":e[0]||(e[0]=t=>l.tab=t),class:"bg-white"},{default:r(()=>[a(ee,{value:"one"},{default:r(()=>[...e[64]||(e[64]=[y("Datos de Factura",-1)])]),_:1}),a(ee,{value:"two",disabled:!l.cargarDetalle},{default:r(()=>[...e[65]||(e[65]=[y("Detalle de Artículos",-1)])]),_:1},8,["disabled"])]),_:1},8,["modelValue"]),a(L,{class:"pt-0"},{default:r(()=>[a(xe,{modelValue:l.tab,"onUpdate:modelValue":e[63]||(e[63]=t=>l.tab=t)},{default:r(()=>[a(te,{value:"one"},{default:r(()=>[a(h,{class:"mt-2",justify:"center"},{default:r(()=>[a(d,{cols:"12",md:"10"},{default:r(()=>[a(H,null,{default:r(()=>[a(J,{class:"d-flex align-center"},{default:r(()=>[a(O,{class:"mr-2"},{default:r(()=>[...e[66]||(e[66]=[y("mdi-receipt-text-outline",-1)])]),_:1}),e[67]||(e[67]=y(" Datos de la Compra ",-1))]),_:1}),a(L,null,{default:r(()=>[a(se,null,{default:r(()=>[a(h,null,{default:r(()=>[a(d,{md:"6",cols:"12"},{default:r(()=>[a(Q,{items:l.proveedores,label:"Proveedor *","item-title":"nombre","item-value":"id",variant:"outlined",modelValue:l.proveedor,"onUpdate:modelValue":[e[1]||(e[1]=t=>l.proveedor=t),s.cargarDatosProveedor]},null,8,["items","modelValue","onUpdate:modelValue"]),c("p",Bo,[e[69]||(e[69]=y("Si es un nuevo proveedor, podes ",-1)),a(u,{class:"text-caption",to:{name:"listado-de-proveedores"}},{default:r(()=>[...e[68]||(e[68]=[y("agregarlo aquí",-1)])]),_:1})])]),_:1}),a(d,{md:"6",cols:"12"},{default:r(()=>[a(m,{label:"Fecha *",type:"date",variant:"outlined",modelValue:l.fecha,"onUpdate:modelValue":e[2]||(e[2]=t=>l.fecha=t)},null,8,["modelValue"])]),_:1})]),_:1}),a(E,{class:"my-4"}),a(h,null,{default:r(()=>[a(d,{cols:"12"},{default:r(()=>[a(de,{modelValue:l.esCompraFiscal,"onUpdate:modelValue":e[3]||(e[3]=t=>l.esCompraFiscal=t),color:"primary",label:"¿Es una compra con factura fiscal?",hint:"Active si tiene factura con datos fiscales (IVA, CUIT, etc.)","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1}),l.esCompraFiscal?(k(),T(E,{key:0,class:"my-4"})):P("",!0),l.esCompraFiscal?(k(),T(h,{key:1},{default:r(()=>[a(d,{cols:"12"},{default:r(()=>[...e[70]||(e[70]=[c("h4",{class:"mb-2"},"Datos del Comprobante",-1)])]),_:1}),a(d,{md:"4",cols:"12"},{default:r(()=>[a(Q,{modelValue:l.compra.tipo_comprobante,"onUpdate:modelValue":e[4]||(e[4]=t=>l.compra.tipo_comprobante=t),items:[{value:1,title:"Factura A"},{value:6,title:"Factura B"},{value:11,title:"Factura C"},{value:51,title:"Factura M"}],label:"Tipo de Comprobante *","item-title":"title","item-value":"value",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(d,{md:"2",cols:"5"},{default:r(()=>[a(m,{modelValue:l.compra.punto_venta,"onUpdate:modelValue":e[5]||(e[5]=t=>l.compra.punto_venta=t),type:"number",label:"Punto de Venta *",variant:"outlined",onBlur:s.formatearPuntoVenta},null,8,["modelValue","onBlur"])]),_:1}),a(d,{md:"1",cols:"12",class:"d-flex align-center justify-center"},{default:r(()=>[...e[71]||(e[71]=[c("div",{class:"text-h5",style:{"padding-bottom":"20px"}},"-",-1)])]),_:1}),a(d,{md:"4",cols:"6"},{default:r(()=>[a(m,{modelValue:l.compra.numero_comprobante,"onUpdate:modelValue":e[6]||(e[6]=t=>l.compra.numero_comprobante=t),type:"number",label:"Número *",variant:"outlined",onBlur:s.formatearNumeroComprobante},null,8,["modelValue","onBlur"])]),_:1})]),_:1})):P("",!0),l.esCompraFiscal?(k(),T(h,{key:2},{default:r(()=>[a(d,{md:"6",cols:"12"},{default:r(()=>[a(Q,{modelValue:l.compra.codigo_documento_vendedor,"onUpdate:modelValue":e[7]||(e[7]=t=>l.compra.codigo_documento_vendedor=t),items:[{value:80,title:"CUIT"},{value:96,title:"DNI"},{value:86,title:"CDI"}],label:"Tipo de Documento Proveedor","item-title":"title","item-value":"value",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(d,{md:"6",cols:"12"},{default:r(()=>[a(m,{modelValue:l.compra.cuit_proveedor,"onUpdate:modelValue":e[8]||(e[8]=t=>l.compra.cuit_proveedor=t),label:"CUIT/DNI Proveedor",variant:"outlined",hint:"Solo números"},null,8,["modelValue"])]),_:1})]),_:1})):P("",!0),a(E,{class:"my-4"}),l.esCompraFiscal?P("",!0):(k(),T(h,{key:3},{default:r(()=>[a(d,{cols:"12"},{default:r(()=>[...e[72]||(e[72]=[c("h4",{class:"mb-2"},"Monto de la Compra",-1)])]),_:1}),a(d,{md:"6",cols:"12"},{default:r(()=>[a(m,{modelValue:l.compra.monto_no_fiscal,"onUpdate:modelValue":e[9]||(e[9]=t=>l.compra.monto_no_fiscal=t),label:"Monto Total *",variant:"outlined",type:"text",prefix:"$",onInput:e[10]||(e[10]=t=>s.formatearCampoMoneda("monto_no_fiscal",t)),onBlur:e[11]||(e[11]=t=>s.finalizarFormato("monto_no_fiscal")),hint:"Ingrese el monto total de la compra"},null,8,["modelValue"])]),_:1})]),_:1})),l.esCompraFiscal?(k(),T(h,{key:4},{default:r(()=>[a(d,{cols:"12"},{default:r(()=>[...e[73]||(e[73]=[c("h4",{class:"mb-2"},"Discriminación de IVA",-1)])]),_:1}),a(d,{md:"3",cols:"6"},{default:r(()=>[a(m,{modelValue:l.compra.neto_gravado_21,"onUpdate:modelValue":e[12]||(e[12]=t=>l.compra.neto_gravado_21=t),label:"Neto 21%",variant:"outlined",type:"text",prefix:"$",onInput:e[13]||(e[13]=t=>s.formatearCampoMoneda("neto_gravado_21",t)),onBlur:e[14]||(e[14]=t=>s.finalizarFormato("neto_gravado_21"))},null,8,["modelValue"])]),_:1}),a(d,{md:"3",cols:"6"},{default:r(()=>[a(m,{modelValue:l.compra.iva_21,"onUpdate:modelValue":e[15]||(e[15]=t=>l.compra.iva_21=t),label:"IVA 21%",variant:"outlined",type:"text",prefix:"$",readonly:"","bg-color":"grey-lighten-3"},null,8,["modelValue"])]),_:1}),a(d,{md:"3",cols:"6"},{default:r(()=>[a(m,{modelValue:l.compra.neto_gravado_10_5,"onUpdate:modelValue":e[16]||(e[16]=t=>l.compra.neto_gravado_10_5=t),label:"Neto 10.5%",variant:"outlined",type:"text",prefix:"$",onInput:e[17]||(e[17]=t=>s.formatearCampoMoneda("neto_gravado_10_5",t)),onBlur:e[18]||(e[18]=t=>s.finalizarFormato("neto_gravado_10_5"))},null,8,["modelValue"])]),_:1}),a(d,{md:"3",cols:"6"},{default:r(()=>[a(m,{modelValue:l.compra.iva_10_5,"onUpdate:modelValue":e[19]||(e[19]=t=>l.compra.iva_10_5=t),label:"IVA 10.5%",variant:"outlined",type:"text",prefix:"$",readonly:"","bg-color":"grey-lighten-3"},null,8,["modelValue"])]),_:1}),a(d,{md:"3",cols:"6"},{default:r(()=>[a(m,{modelValue:l.compra.neto_gravado_27,"onUpdate:modelValue":e[20]||(e[20]=t=>l.compra.neto_gravado_27=t),label:"Neto 27%",variant:"outlined",type:"text",prefix:"$",onInput:e[21]||(e[21]=t=>s.formatearCampoMoneda("neto_gravado_27",t)),onBlur:e[22]||(e[22]=t=>s.finalizarFormato("neto_gravado_27"))},null,8,["modelValue"])]),_:1}),a(d,{md:"3",cols:"6"},{default:r(()=>[a(m,{modelValue:l.compra.iva_27,"onUpdate:modelValue":e[23]||(e[23]=t=>l.compra.iva_27=t),label:"IVA 27%",variant:"outlined",type:"text",prefix:"$",readonly:"","bg-color":"grey-lighten-3"},null,8,["modelValue"])]),_:1}),a(d,{md:"3",cols:"6"},{default:r(()=>[a(m,{modelValue:l.compra.neto_gravado_5,"onUpdate:modelValue":e[24]||(e[24]=t=>l.compra.neto_gravado_5=t),label:"Neto 5%",variant:"outlined",type:"text",prefix:"$",onInput:e[25]||(e[25]=t=>s.formatearCampoMoneda("neto_gravado_5",t)),onBlur:e[26]||(e[26]=t=>s.finalizarFormato("neto_gravado_5"))},null,8,["modelValue"])]),_:1}),a(d,{md:"3",cols:"6"},{default:r(()=>[a(m,{modelValue:l.compra.iva_5,"onUpdate:modelValue":e[27]||(e[27]=t=>l.compra.iva_5=t),label:"IVA 5%",variant:"outlined",type:"text",prefix:"$",readonly:"","bg-color":"grey-lighten-3"},null,8,["modelValue"])]),_:1}),a(d,{md:"3",cols:"6"},{default:r(()=>[a(m,{modelValue:l.compra.neto_gravado_2_5,"onUpdate:modelValue":e[28]||(e[28]=t=>l.compra.neto_gravado_2_5=t),label:"Neto 2.5%",variant:"outlined",type:"text",prefix:"$",onInput:e[29]||(e[29]=t=>s.formatearCampoMoneda("neto_gravado_2_5",t)),onBlur:e[30]||(e[30]=t=>s.finalizarFormato("neto_gravado_2_5"))},null,8,["modelValue"])]),_:1}),a(d,{md:"3",cols:"6"},{default:r(()=>[a(m,{modelValue:l.compra.iva_2_5,"onUpdate:modelValue":e[31]||(e[31]=t=>l.compra.iva_2_5=t),label:"IVA 2.5%",variant:"outlined",type:"text",prefix:"$",readonly:"","bg-color":"grey-lighten-3"},null,8,["modelValue"])]),_:1})]),_:1})):P("",!0),a(E,{class:"my-4"}),l.esCompraFiscal?(k(),T(h,{key:5},{default:r(()=>[a(d,{cols:"12"},{default:r(()=>[...e[74]||(e[74]=[c("h4",{class:"mb-2"},"Otros Conceptos",-1)])]),_:1}),a(d,{md:"3",cols:"6"},{default:r(()=>[a(m,{modelValue:l.compra.exento,"onUpdate:modelValue":e[32]||(e[32]=t=>l.compra.exento=t),label:"Exento",variant:"outlined",type:"text",prefix:"$",onInput:e[33]||(e[33]=t=>s.formatearCampoMoneda("exento",t)),onBlur:e[34]||(e[34]=t=>s.finalizarFormato("exento"))},null,8,["modelValue"])]),_:1}),a(d,{md:"3",cols:"6"},{default:r(()=>[a(m,{modelValue:l.compra.no_gravado,"onUpdate:modelValue":e[35]||(e[35]=t=>l.compra.no_gravado=t),label:"No Gravado",variant:"outlined",type:"text",prefix:"$",onInput:e[36]||(e[36]=t=>s.formatearCampoMoneda("no_gravado",t)),onBlur:e[37]||(e[37]=t=>s.finalizarFormato("no_gravado"))},null,8,["modelValue"])]),_:1}),a(d,{md:"2",cols:"4"},{default:r(()=>[a(m,{modelValue:l.compra.percepciones_iva,"onUpdate:modelValue":e[38]||(e[38]=t=>l.compra.percepciones_iva=t),label:"Percepciones IVA",variant:"outlined",type:"text",prefix:"$",onInput:e[39]||(e[39]=t=>s.formatearCampoMoneda("percepciones_iva",t)),onBlur:e[40]||(e[40]=t=>s.finalizarFormato("percepciones_iva"))},null,8,["modelValue"])]),_:1}),a(d,{md:"2",cols:"4"},{default:r(()=>[a(m,{modelValue:l.compra.percepciones_iibb,"onUpdate:modelValue":e[41]||(e[41]=t=>l.compra.percepciones_iibb=t),label:"Percepciones IIBB",variant:"outlined",type:"text",prefix:"$",onInput:e[42]||(e[42]=t=>s.formatearCampoMoneda("percepciones_iibb",t)),onBlur:e[43]||(e[43]=t=>s.finalizarFormato("percepciones_iibb"))},null,8,["modelValue"])]),_:1}),a(d,{md:"2",cols:"4"},{default:r(()=>[a(m,{modelValue:l.compra.otros_tributos,"onUpdate:modelValue":e[44]||(e[44]=t=>l.compra.otros_tributos=t),label:"Otros Tributos",variant:"outlined",type:"text",prefix:"$",onInput:e[45]||(e[45]=t=>s.formatearCampoMoneda("otros_tributos",t)),onBlur:e[46]||(e[46]=t=>s.finalizarFormato("otros_tributos"))},null,8,["modelValue"])]),_:1})]),_:1})):P("",!0),a(E,{class:"my-4"}),a(h,null,{default:r(()=>[a(d,{md:"6",cols:"12"},{default:r(()=>[a(m,{"model-value":s.formatear(s.totalCompra),label:"Total de la Factura",variant:"outlined",readonly:"",class:"text-h6","bg-color":"blue-grey-lighten-5"},null,8,["model-value"])]),_:1})]),_:1}),a(E,{class:"my-4"}),a(h,null,{default:r(()=>[a(d,{cols:"12"},{default:r(()=>[a(de,{modelValue:l.cargarDetalle,"onUpdate:modelValue":e[47]||(e[47]=t=>l.cargarDetalle=t),color:"primary",label:"¿Desea cargar el detalle de artículos para actualizar stock/precios?",hint:"Si no activa esta opción, solo se registrará la factura con los montos de IVA","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1}),a(h,{justify:"end",class:"mt-4"},{default:r(()=>[l.cargarDetalle?(k(),T(d,{key:0,cols:"auto"},{default:r(()=>[a(F,{color:"primary",onClick:e[48]||(e[48]=t=>l.tab="two"),"prepend-icon":"mdi-arrow-right"},{default:r(()=>[...e[75]||(e[75]=[y(" Ir a Detalle de Artículos ",-1)])]),_:1})]),_:1})):P("",!0),l.cargarDetalle?P("",!0):(k(),T(d,{key:1,cols:"auto"},{default:r(()=>[a(F,{color:"success",onClick:s.guardarCompra,"prepend-icon":"mdi-content-save"},{default:r(()=>[...e[76]||(e[76]=[y(" Guardar Compra ",-1)])]),_:1},8,["onClick"])]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(te,{value:"two"},{default:r(()=>[a(h,{class:"mt-2",justify:"center"},{default:r(()=>[a(d,{cols:"12",md:"10"},{default:r(()=>[a(H,null,{default:r(()=>[a(J,{class:"d-flex align-center"},{default:r(()=>[a(O,{class:"mr-2"},{default:r(()=>[...e[77]||(e[77]=[y("mdi-package-variant",-1)])]),_:1}),e[78]||(e[78]=y(" Detalle de Artículos ",-1))]),_:1}),a(L,null,{default:r(()=>[a(se,null,{default:r(()=>[a(h,null,{default:r(()=>[a(d,{md:"4",cols:"12"},{default:r(()=>[a(m,{label:"Código",outlined:"",modelValue:l.articulo.codigo,"onUpdate:modelValue":e[49]||(e[49]=t=>l.articulo.codigo=t),id:"codigo","append-icon":"mdi-magnify","onClick:append":e[50]||(e[50]=t=>l.modalBusquedaArticulo=!0),onKeydown:e[51]||(e[51]=t=>s.checkEnter(t)),variant:"outlined"},null,8,["modelValue"]),a(no,{modelValue:l.modalBusquedaArticulo,"onUpdate:modelValue":e[55]||(e[55]=t=>l.modalBusquedaArticulo=t),"max-width":"800"},{default:r(()=>[a(H,null,{default:r(()=>[a(J,null,{default:r(()=>[...e[79]||(e[79]=[c("span",{class:"headline"},"Buscar artículo",-1)])]),_:1}),a(L,null,{default:r(()=>[a(m,{label:"Buscar",modelValue:l.search,"onUpdate:modelValue":e[52]||(e[52]=t=>l.search=t),"append-icon":"mdi-magnify","single-line":"","hide-details":"",variant:"outlined","onClick:append":s.buscarArticulos,onKeyup:e[53]||(e[53]=t=>s.buscarArticulos(t))},null,8,["modelValue","onClick:append"]),a(io,{headers:l.headers,items:l.articulos,"item-key":"codigo",loading:l.cargando,"no-data-text":"No se encontraron artículos","items-per-page-text":"Artículos por página",hover:!0,"loading-text":"cargando artículos..."},{"item.actions":r(({item:t})=>[a(O,{small:"",onClick:v=>s.seleccionarArticulo(t),color:"blue"},{default:r(()=>[...e[80]||(e[80]=[y("mdi-check",-1)])]),_:1},8,["onClick"])]),_:1},8,["headers","items","loading"])]),_:1}),a(so,null,{default:r(()=>[a(uo),a(F,{color:"blue darken-1",text:"",onClick:e[54]||(e[54]=t=>{l.modalBusquedaArticulo=!1,l.search="",l.articulos=[]})},{default:r(()=>[...e[81]||(e[81]=[y("Cerrar",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(d,{md:"4",cols:"6"},{default:r(()=>[a(m,{label:"Descripción",modelValue:l.articulo.descripcion,"onUpdate:modelValue":e[56]||(e[56]=t=>l.articulo.descripcion=t),variant:"underlined",readonly:""},null,8,["modelValue"])]),_:1}),a(d,{md:"4",cols:"6"},{default:r(()=>[a(m,{label:"Stock actual",modelValue:l.articulo.stock,"onUpdate:modelValue":e[57]||(e[57]=t=>l.articulo.stock=t),variant:"underlined",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),a(h,null,{default:r(()=>[a(d,{md:"4",cols:"6"},{default:r(()=>[a(m,{label:"Costo",modelValue:l.articulo.costo,"onUpdate:modelValue":e[58]||(e[58]=t=>l.articulo.costo=t),variant:"outlined",type:"number"},null,8,["modelValue"])]),_:1}),a(d,{md:"4",cols:"6"},{default:r(()=>[a(m,{label:"Cantidad comprada",modelValue:l.articulo.cantidad,"onUpdate:modelValue":e[59]||(e[59]=t=>l.articulo.cantidad=t),variant:"outlined",type:"number"},null,8,["modelValue"])]),_:1}),a(d,{md:"4",cols:"6"},{default:r(()=>[a(m,{label:"Precio de venta",modelValue:l.articulo.precio,"onUpdate:modelValue":e[60]||(e[60]=t=>l.articulo.precio=t),variant:"outlined",id:"precioArticulo",type:"number",hint:"Actualizar precio de venta","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1}),a(h,{justify:"end"},{default:r(()=>[a(d,{cols:"12",md:"2"},{default:r(()=>[a(F,{color:"primary",onClick:e[61]||(e[61]=t=>s.agregarArticulo()),"prepend-icon":"mdi-plus"},{default:r(()=>[...e[82]||(e[82]=[y("Agregar",-1)])]),_:1})]),_:1})]),_:1}),a(E,{class:"my-4"}),a(h,null,{default:r(()=>[a(d,null,{default:r(()=>[a(co,null,{default:r(()=>[e[84]||(e[84]=c("thead",null,[c("tr",null,[c("th",null,"Código"),c("th",null,"Descripción"),c("th",null,"Precio"),c("th",null,"Costo"),c("th",null,"Cantidad"),c("th",null,"Subtotal"),c("th",null,"Acciones")])],-1)),c("tbody",null,[(k(!0),ue(le,null,mo(l.detalle,t=>(k(),ue("tr",{key:t.codigo},[c("td",null,N(t.codigo),1),c("td",null,N(t.descripcion),1),c("td",null,N(s.formatear(t.precio)),1),c("td",null,N(s.formatear(t.costo)),1),c("td",null,N(t.cantidad),1),c("td",null,N(s.formatear(t.subtotal)),1),c("td",null,[a(O,{small:"",onClick:v=>s.eliminarArticulo(t),color:"red"},{default:r(()=>[...e[83]||(e[83]=[y("mdi-delete",-1)])]),_:1},8,["onClick"])])]))),128))])]),_:1})]),_:1})]),_:1}),a(h,{justify:"end",class:"mt-4"},{default:r(()=>[a(d,{cols:"auto"},{default:r(()=>[a(F,{color:"grey",onClick:e[62]||(e[62]=t=>l.tab="one"),"prepend-icon":"mdi-arrow-left",variant:"text"},{default:r(()=>[...e[85]||(e[85]=[y(" Volver ",-1)])]),_:1})]),_:1}),a(d,{cols:"auto"},{default:r(()=>[a(F,{color:"success",onClick:s.guardarCompra,"prepend-icon":"mdi-content-save"},{default:r(()=>[...e[86]||(e[86]=[y(" Guardar Compra ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}const Po=ao(Fo,[["render",To]]);export{Po as default};
